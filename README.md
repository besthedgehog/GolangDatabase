# –ú–æ—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø–æ Golang

# –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
- [–ë–∞–∑–æ–≤—ã–µ –≤–µ—â–∏](#–±–∞–∑–æ–≤—ã–µ-–≤–µ—â–∏)
  - [–ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ](#–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ)
  - [–ö–∞–∫ —É–∑–Ω–∞—Ç—å —Ç–∏–ø –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π?](#–∫–∞–∫-—É–∑–Ω–∞—Ç—å-—Ç–∏–ø-–ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π)
  - [–¶–∏–∫–ª—ã](#—Ü–∏–∫–ª—ã)
  - [Switch](#switch)
  - [Go mod init](#go-mod-init)
  - [return](#return)
- [–°—á–∏—Ç—ã–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ stdin](#—Å—á–∏—Ç—ã–≤–∞–Ω–∏–µ-–∑–Ω–∞—á–µ–Ω–∏–π-–∏–∑-stdin)
- [–ò–º–ø–æ—Ä—Ç—ã](#–∏–º–ø–æ—Ä—Ç—ã)
- [–î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏-–∏-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
  - [–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª–ª—è—Ü–∏—è](#–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã-–∏-–∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª–ª—è—Ü–∏—è)
- [–†–∞—Å–ø–∞–∫–æ–≤–∫–∞](#—Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞)
- [defer](#defer)
  - [defer –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—è –ø—Ä–∏ os.Exit()](#defer-–Ω–µ-–≤—ã–ø–æ–ª–Ω—è–µ—Ç—è-–ø—Ä–∏-osexit)
- [–û–û–ü –≤ golang](#–æ–æ–ø-–≤-golang)
  - [1. –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ](#1-–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ)
  - [2. –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è](#2-–∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è)
  - [3. –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º](#3-–ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º)
  - [–í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è (–≠–º–±–µ–¥–∏–Ω–≥–∏)](#–≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è-—ç–º–±–µ–¥–∏–Ω–≥–∏)
    - [–ö–∞–∫ –ø–æ–Ω—è—Ç—å –∫–æ–≥–¥–∞ –ø–∏—Å–∞—Ç—å —Å –∏–º–µ–Ω–µ–º, –∫–æ–≥–¥–∞ –±–µ–∑:](#–∫–∞–∫-–ø–æ–Ω—è—Ç—å-–∫–æ–≥–¥–∞-–ø–∏—Å–∞—Ç—å-—Å-–∏–º–µ–Ω–µ–º-–∫–æ–≥–¥–∞-–±–µ–∑)
  - [–ï—â—ë –ø—Ä–∏–º–µ—Ä—ã –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è](#–µ—â-–ø—Ä–∏–º–µ—Ä—ã-–≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è)
- [–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ Golang](#–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã-–≤-golang)
  - [–ï—â–µ –æ–¥–Ω–æ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ñ–µ–π—Å–æ–≤](#–µ—â–µ-–æ–¥–Ω–æ-–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ-–∏–Ω—Ç–µ—Ñ–µ–π—Å–æ–≤)
  - [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤)
    - [–ö–∞–∫ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ —Ç–µ—Å—Ç–∞—Ö?](#–∫–∞–∫-–º–æ–∂–Ω–æ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã-–≤-—Ç–µ—Å—Ç–∞—Ö)
- [–ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](#–ø–∞—Ç—Ç–µ—Ä–Ω—ã-–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
  - [–§–∞–±—Ä–∏–∫–∞](#—Ñ–∞–±—Ä–∏–∫–∞)
  - [–ê–¥–∞–ø—Ç–µ—Ä](#–∞–¥–∞–ø—Ç–µ—Ä)
    - [–ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å:](#–∫–æ–≥–¥–∞-–ø—Ä–∏–º–µ–Ω—è—Ç—å)
  - [Dependency Injection (–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)](#dependency-injection-–≤–Ω–µ–¥—Ä–µ–Ω–∏–µ-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
    - [–ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–∑–¥–∞–Ω–∏—è di](#–∞–ª–≥–æ—Ä–∏—Ç–º-—Å–æ–∑–¥–∞–Ω–∏—è-di)
- [–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤ (–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞)](#–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è-–º–µ—Ç–æ–¥–æ–≤-–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞)
- [–ó–∞–º—ã–∫–∞–Ω–∏—è](#–∑–∞–º—ã–∫–∞–Ω–∏—è)
- [Generic](#generic)
- [Resful API](#resful-api)
    - [–ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä—É—Ç–æ](#–ø–æ—á–µ–º—É-—ç—Ç–æ-–∫—Ä—É—Ç–æ)
- [–£–∫–∞–∑–∞—Ç–µ–ª–∏](#—É–∫–∞–∑–∞—Ç–µ–ª–∏)
  - [–£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É](#—É–∫–∞–∑–∞—Ç–µ–ª—å-–Ω–∞-—Å—Ç—Ä—É–∫—Ç—É—Ä—É)
  - [–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?](#–ø–æ—á–µ–º—É-—ç—Ç–æ-–≤–∞–∂–Ω–æ)
    - [–ò–Ω–æ–≥–¥–∞ –∏–º–µ–µ—Ç –±–æ–ª—å—à–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–µ—Ä–µ–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–ª–∏ —É–∫–∞–∑–∞—Ç–µ–ª—å](#–∏–Ω–æ–≥–¥–∞-–∏–º–µ–µ—Ç-–±–æ–ª—å—à–æ–µ-–∑–Ω–∞—á–µ–Ω–∏–µ-–ø–µ—Ä–µ–¥–∞—Ç—å-—Å—Ç—Ä—É–∫—Ç—É—Ä—É-–∏–ª–∏-—É–∫–∞–∑–∞—Ç–µ–ª—å)
  - [–ß—Ç–æ–±—ã –∑–∞–ø–æ–º–Ω–∏—Ç—å:](#—á—Ç–æ–±—ã-–∑–∞–ø–æ–º–Ω–∏—Ç—å)
  - [–£–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Å—Ä–µ–∑—ã](#—É–∫–∞–∑–∞—Ç–µ–ª–∏-–Ω–∞-—Å—Ä–µ–∑—ã)
  - [–£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ä–µ—Å–∏–≤–µ—Ä –≤ –º–µ—Ç–æ–¥–µ](#—É–∫–∞–∑–∞—Ç–µ–ª—å-–Ω–∞-—Ä–µ—Å–∏–≤–µ—Ä-–≤-–º–µ—Ç–æ–¥–µ)
  - [–†–∞–∑–Ω–∏—Ü–∞ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π —Å —É–∫–∞–∑–∞—Ç–µ–ª–µ–º –∏ –±–µ–∑](#—Ä–∞–∑–Ω–∏—Ü–∞-–≤-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏-—Ñ—É–Ω–∫—Ü–∏–π-—Å-—É–∫–∞–∑–∞—Ç–µ–ª–µ–º-–∏-–±–µ–∑)
- [nil](#nil)
- [–¢–µ—Å—Ç—ã](#—Ç–µ—Å—Ç—ã)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω–æ–≥–æ —Ç–∏–ø–∞](#–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω–æ–≥–æ-—Ç–∏–ø–∞)
  - [–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω–æ–≥–æ —Ç–∏–ø–∞?](#—á—Ç–æ-–≤–Ω—É—Ç—Ä–∏-–ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω–æ–≥–æ-—Ç–∏–ø–∞)
- [–ü—Ä–∏–∫–æ–ª—å–Ω—ã–µ —Ñ–∏—à–∫–∏](#–ø—Ä–∏–∫–æ–ª—å–Ω—ã–µ-—Ñ–∏—à–∫–∏)
  - [–í—ã–≤–æ–¥ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏ –∑–Ω–∞—á–µ–Ω–∏—è](#–≤—ã–≤–æ–¥-–∞—Ä–≥—É–º–µ–Ω—Ç–∞-–∏-–∑–Ω–∞—á–µ–Ω–∏—è)
  - [–í—ã–≤–æ–¥ –ø–æ–ª–µ–π –ø—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è —Å—Ç—É—Ä–∫—É—Ä –∏ map](#–≤—ã–≤–æ–¥-–ø–æ–ª–µ–π-–ø—Ä–µ–º–µ–Ω–Ω–æ–π-–¥–ª—è-—Å—Ç—É—Ä–∫—É—Ä-–∏-map)
  - [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
  - [type assertion](#type-assertion)
  - [–¶–∏–∫–ª range](#—Ü–∏–∫–ª-range)
  - [–ú–µ—Ç–∫–∏](#–º–µ—Ç–∫–∏)
  - [–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏](#–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-—Ñ—É–Ω–∫—Ü–∏–∏)
  - [–ü–µ—Ä–µ–º–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏](#–ø–µ—Ä–µ–º–µ–Ω–Ω–æ–µ-—á–∏—Å–ª–æ-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤-—Ñ—É–Ω–∫—Ü–∏–∏)
  - [–ó–∞–º—ã–∫–∞–Ω–∏—è –≤ defer](#–∑–∞–º—ã–∫–∞–Ω–∏—è-–≤-defer)
  - [–£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —É–∫–∞–∑–∞—Ç–µ–ª—å](#—É–∫–∞–∑–∞—Ç–µ–ª—å-–Ω–∞-—É–∫–∞–∑–∞—Ç–µ–ª—å)
  - [–ö—É–¥—Ä—è–≤—ã–µ —Å–∫–æ–±–∫–∏ –±–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞](#–∫—É–¥—Ä—è–≤—ã–µ-—Å–∫–æ–±–∫–∏-–±–µ–∑-–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞)
  - [iota](#iota)
  - [–ó–∞–¥–∞—ë–º —Å–≤–æ–π —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ –≤ Print –∏ –∞–Ω–∞–ª–æ–≥–∞—Ö](#–∑–∞–¥–∞–º-—Å–≤–æ–π-—Ñ–æ—Ä–º–∞—Ç-–≤—ã–≤–æ–¥–∞-–≤-print-–∏-–∞–Ω–∞–ª–æ–≥–∞—Ö)
  - [Alias —Ç–∏–ø–∞](#alias-—Ç–∏–ø–∞)
- [–ë–µ–∑ –ø–∞–Ω–∏–∫–∏! (–Ω–µ—Ç)](#–±–µ–∑-–ø–∞–Ω–∏–∫–∏-–Ω–µ—Ç)
  - [–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–∞–Ω–∏–∫–∞?](#—á—Ç–æ-—Ç–∞–∫–æ–µ-–ø–∞–Ω–∏–∫–∞)
  - [–ö–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–∞–Ω–∏–∫–∞?](#–∫–æ–≥–¥–∞-–≤–æ–∑–Ω–∏–∫–∞–µ—Ç-–ø–∞–Ω–∏–∫–∞)
    - [Go –≤—ã–∑—ã–≤–∞–µ—Ç –ø–∞–Ω–∏–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏:](#go-–≤—ã–∑—ã–≤–∞–µ—Ç-–ø–∞–Ω–∏–∫—É-–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏-–ø—Ä–∏)
  - [recover](#recover)
- [Gorutines](#gorutines)
  - [wg.Wait(), wg.Go() –∏ errgroup.Group()](#wgwait-wggo-–∏-errgroupgroup)
  - [errgroup.Group](#errgroupgroup)
- [–ö–∞–Ω–∞–ª—ã](#–∫–∞–Ω–∞–ª—ã)
    - [–ù–µ–±—É—Ñ—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)](#–Ω–µ–±—É—Ñ—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π-–∫–∞–Ω–∞–ª-–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é)
    - [–ë—É—Ñ—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª](#–±—É—Ñ—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π-–∫–∞–Ω–∞–ª)
    - [–û–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã](#–æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ-–∫–∞–Ω–∞–ª—ã)
  - [Select](#select)
    - [–¢–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#—Ç–≤–æ–π-–∫–æ–º–ø—å—é—Ç–µ—Ä-–≤-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
    - [–ß—Ç–æ –∑–Ω–∞—á–∏—Ç "–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É—Ç–µ—á–∫–∞–º —Ä–µ—Å—É—Ä—Å–æ–≤"?](#—á—Ç–æ-–∑–Ω–∞—á–∏—Ç-–º–æ–∂–µ—Ç-–ø—Ä–∏–≤–µ—Å—Ç–∏-–∫-—É—Ç–µ—á–∫–∞–º-—Ä–µ—Å—É—Ä—Å–æ–≤)
    - [–ß—Ç–æ —Å—Ç–æ–∏—Ç –¥–µ–ª–∞—Ç—å –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É:](#—á—Ç–æ-—Å—Ç–æ–∏—Ç-–¥–µ–ª–∞—Ç—å-–∫–∞–∫-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É)
  - [nil-–∫–∞–Ω–∞–ª—ã](#nil-–∫–∞–Ω–∞–ª—ã)
  - [–†–µ–∑—é–º–µ](#—Ä–µ–∑—é–º–µ)
  - [–ö–∞–∫ –∑–∞–≤–µ—Ä—à–∞—Ç—å –≥–æ—Ä—É—Ç–∏–Ω—ã –∫—Ä–∞—Å–∏–≤–æ?](#–∫–∞–∫-–∑–∞–≤–µ—Ä—à–∞—Ç—å-–≥–æ—Ä—É—Ç–∏–Ω—ã-–∫—Ä–∞—Å–∏–≤–æ)
- [Generic](#generic)
    - [–ß—Ç–æ —Ç–∞–∫–æ–µ generic –≤ Go](#—á—Ç–æ-—Ç–∞–∫–æ–µ-generic-–≤-go)
  - [–ü—Ä–∏–º–µ—Ä pipeline](#–ø—Ä–∏–º–µ—Ä-pipeline)
  - [–í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø—Ä–æ –∑–∞–∫—Ä—ã—Ç—ã–µ –∫–∞–Ω–∞–ª—ã](#–≤–∞–∂–Ω—ã–π-–º–æ–º–µ–Ω—Ç-–ø—Ä–æ-–∑–∞–∫—Ä—ã—Ç—ã–µ-–∫–∞–Ω–∞–ª—ã)
- [–î–ª—è –ø—Ä–∏–º–µ—Ä–∞](#–¥–ª—è-–ø—Ä–∏–º–µ—Ä–∞)
  - [–ù–æ–º–µ—Ä –æ–¥–∏–Ω](#–Ω–æ–º–µ—Ä-–æ–¥–∏–Ω)
- [Mutex](#mutex)
    - [–ó–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?](#–∑–∞—á–µ–º-–æ–Ω-–Ω—É–∂–µ–Ω)
    - [–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç mu.Lock()](#–∫–∞–∫-—Ä–∞–±–æ—Ç–∞–µ—Ç-mulock)
  - [worker](#worker)
  - [–ß—Ç–æ —Ç–∞–∫–æ–µ worker](#—á—Ç–æ-—Ç–∞–∫–æ–µ-worker)
- [–ú–æ–∫](#–º–æ–∫)
- [Atomic](#atomic)
  - [–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–∞–∫–µ—Ç sync/atomic](#—á—Ç–æ-–¥–µ–ª–∞–µ—Ç-–ø–∞–∫–µ—Ç-syncatomic)
  - [–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å](#–∫–æ–≥–¥–∞-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å)
- [–†–∞–±–æ—Ç–∞ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏](#—Ä–∞–±–æ—Ç–∞-—Å-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏)
- [Init](#init)

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ*. –ò–Ω–æ–≥–¥–∞ —è –±—É–¥—É –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫–æ–¥ –≤–Ω–µ —Ñ—É–Ω–∫—Ü–∏–∏ main(), —Ö–æ—Ç—è –æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –Ω–µ–π.

–í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö —è –±—É–¥—É —Å—Ç–∞—Ä–∞—Ç—å—Å—è –ø–∏—Å–∞—Ç—å // main

```go
// main

fmt.Println("Hello world!")
```

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤–æ—Ç —á–∞—Å—Ç—å –∫–æ–¥–∞ –ø–æ—Å–ª–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –≤ —Ñ—É–Ω–∫—Ü–∏—é main()

–∏ –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ –∏ –∏–º–ø–æ—Ä—Ç—ã

# –ë–∞–∑–æ–≤—ã–µ –≤–µ—â–∏

## –ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ

–ü—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏.

–í—Ç–æ—Ä–æ–π —Å–ø–æ—Å–æ–± —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –ø—Ä—è–º–æ –Ω–∞ –º–µ—Å—Ç–µ

```go
package main

import (
	"fmt"
)

func testingScope() {
	var count int
	for count = 3; count > 0; count-- {
		fmt.Println(count)
	}

	fmt.Println("Here we go")
	fmt.Printf("count  = %v", count) // –ï—Å—Ç—å –¥–æ—Å—Ç—É–ø —Å—é–¥–∞
}

func testingScope1() {
	// var count int
	for count := 3; count > 0; count-- {
		fmt.Println(count)
	}

	fmt.Println("Here we go")
	// fmt.Printf("count  = %v", count)
	// ./example.go:24:28: undefined: count
}

func testingScope2() {
	count := 3
	for count > 0 {
		count--
		fmt.Println(count)
	}

	fmt.Println("Here we go")
	fmt.Printf("count  = %v", count) // –ï—Å—Ç—å –¥–æ—Å—Ç—É–ø —Å—é–¥–∞
}

func main() {
	testingScope()
}
```

## –ö–∞–∫ —É–∑–Ω–∞—Ç—å —Ç–∏–ø –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π?

```go
var x = 42
fmt.Printf("–¢–∏–ø –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π: %T\n", x)

/// –ò–ª–∏
import "reflect"

fmt.Println(reflect.TypeOf(x)) // int
```

## –¶–∏–∫–ª—ã

–° –ø—Ä–µ–¥—É—Å–ª–æ–≤–∏–µ–º

```go
func main() {
	var count = 0
	for count < 10 {
		var num = rand.Intn(10) + 1
		fmt.Println(num)
		count++
	}
}
```

```go
func main() {
	var count = 0
	for count = 10; count > 0; count-- {
		fmt.Println(count)
	}
}
```

–° –∫–æ—Ä–æ—Ç–∫–∏–º –æ–±—ä—è–≤–ª–µ–Ω–∏–µ–º

```go
func main() {
	for count := 10; count > 0; count-- {
		fmt.Println(count)
	}
}
```

–ï—â—ë –ø–∞—Ä–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —É–¥–æ–±–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è

```go
func hey() {
	if num := rand.Intn(3); num == 0 {
		fmt.Println("Space Adventures")
	} else if num == 1 {
		fmt.Println("SpaceX")
	} else {
		fmt.Println("Virgin Galactic")
	}
}
```

```go
func lalaley() {
	switch num := rand.Intn(10); num {
	case 0:
		fmt.Println("Space Adventures")
	case 1:
		fmt.Println("SpaceX")
	case 2:
		fmt.Println("Virgin Galactic")
	default:
		fmt.Println("SOme Galactic")
	}
}

```

## Switch

```go
// –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π  ID
switch ID {
	// –ø—Ä–æ–≤–µ—Ä—è–µ–º –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ
	case "Apple":
	    fmt.Println("–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å")
	// –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—Ç–æ—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
	case "Google":
	    fmt.Println("–í–∞—à–∞ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è")
	// –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω—É–∂–Ω–æ–≥–æ –Ω–µ –Ω–∞—à–ª–æ—Å—å
	default:
	    fmt.Println("–û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞")
}
```

## Go mod init

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–º–∞–Ω–¥–∞

```go
go mod init nameOfProject
```

–ö–æ–º–∞–Ω–¥–∞ `go mod init` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —è–∑—ã–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è Go –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è. –ú–æ–¥—É–ª—å –≤ Go ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä –ø–∞–∫–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ–±—Ä–∞–Ω—ã –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã –≤–º–µ—Å—Ç–µ.

–ö–æ–≥–¥–∞ –≤—ã –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ –∫–æ–º–∞–Ω–¥—É `go mod init <module-name>`, –æ–Ω–∞ —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª `go.mod` –≤ —Ç–µ–∫—É—â–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ. –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–æ–¥—É–ª–µ, –≤–∫–ª—é—á–∞—è –µ–≥–æ –∏–º—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –í–æ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã:

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ go.mod**: –§–∞–π–ª `go.mod` –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏–º—è –≤–∞—à–µ–≥–æ –º–æ–¥—É–ª—è –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–µ—Ä—Å–∏—è—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞—à –º–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç.
2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏**: –ü–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥—É–ª—è –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∏ Go –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –≤–µ—Ä—Å–∏—è–º–∏.
3. **–£–ø—Ä–æ—â–µ–Ω–∏–µ —Å–±–æ—Ä–∫–∏**: –ú–æ–¥—É–ª–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —É–ø—Ä–æ—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –±–æ–ª–µ–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–æ–π.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, `go mod init` ‚Äî —ç—Ç–æ –ø–µ—Ä–≤—ã–π —à–∞–≥ –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–æ–¥—É–ª—è Go, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–¥–æ–º –∏ –µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

## return

–í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç

```go
return // –ø—Ä–æ—Å—Ç–æ –≤—ã–π—Ç–∏ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–∏—á–µ–≥–æ
```

```go
return nil // –≤–µ—Ä–Ω—É—Ç—å nil
```

–†–∞–∑–Ω–∏—Ü–∞ –µ—Å—Ç—å!

# –°—á–∏—Ç—ã–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ stdin

```go
package main

import "fmt"

func main() {
	var x int64
	var y float32

	fmt.Scanf("%v %v", &x, &y)
	//fmt.Scanf("%d %f", &x, &y)

	fmt.Printf("x = %v, type %T; y = %v\n, type %T", x, x, y, y)
}
```

–ï—Å—Ç—å –µ—â—ë —Å–∫–∞–Ω–µ—Ä Scanf, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å –±–æ–ª–µ–µ –≥–∏–±–∫–∏–µ —É—Å–ª–æ–≤–∏—è

```go
var a, b int
_, err := fmt.Scanf("%d,%d", &a, &b)
// –í–≤–æ–¥: "12,34"
```

```go
var host string
var port int
fmt.Scanf("host=%s port=%d", &host, &port)
// –í–≤–æ–¥: "host=localhost port=5432"
```

# –ò–º–ø–æ—Ä—Ç—ã

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ä–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ import

- –û–±—ã—á–Ω—ã–π –∏–º–ø–æ—Ä—Ç
```
import "fmt"

fmt.Println()
```

- –ò–º–ø–æ—Ä—Ç —Å –ø—Å–µ–≤–¥–æ–Ω–∏–º–æ–º

```
import f "fmt"


f.Println() // –Ω–µ fmt.Println()
```

- –ò–º–ø–æ—Ä—Ç —Å —Ç–æ—á–∫–æ–π (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω—É–¥–µ—Ç—Å—è)

```
import . "fmt"

Println("Something") // –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –ø–∞–∫–µ—Ç–∞
```

- –ü—É—Å—Ç–æ–π –∏–º–ø–æ—Ä—Ç (—Ç–æ–ª—å–∫–æ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–∞ (—Ñ—É–Ω–∫—Ü–∏—è init), –Ω–µ –¥–ª—è –ø—Ä—è–º–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

```
import _ package
```

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash

go env GOROOT GOPATH GOMODCACHE GOBIN
```

- GOROOT: –ø—É—Ç—å –∫ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—É.
- GOPATH: –∫–æ—Ä–µ–Ω—å —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞.
- GOMODCACHE: –∫–µ—à –º–æ–¥—É–ª–µ–π (–æ–±—ã—á–Ω–æ¬†$GOPATH/pkg/mod).
- GOBIN: –∫—É–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ –ø—Ä–∏ go install.

## –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª–ª—è—Ü–∏—è

–ú–æ–∂–Ω–æ –∫–æ–º–ø–∏–ª–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

```bash

GOOS=linux GOARCH=arm64 go build ./cmd/app
```

```bash
GOOS=linux GOARCH=amd64 go build -o myprog-linux-amd64 ./...
```

```bash
GOOS=windows GOARCH=amd64 go build -o myprog-windows-amd64.exe ./...
```

GOTOOLCHAIN –≤ Go (Golang) ‚Äî —ç—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ä–µ–¥—ã, –∫–æ—Ç–æ—Ä–∞—è —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ Go. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Å–±–æ—Ä–∫–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã, –ª–∏–Ω–∫–µ—Ä—ã –∏ –¥—Ä—É–≥–∏–µ —É—Ç–∏–ª–∏—Ç—ã.

# –†–∞—Å–ø–∞–∫–æ–≤–∫–∞

```go
func PrintAll(words ...string) {}

PrintAll("a", "b", "c") // –º–æ–∂–Ω–æ —Ç–∞–∫

// –∏–ª–∏ —Ç–∞–∫
list := []string{"a", "b", "c"}
PrintAll(list...) // —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞
```

```go
...prefix // –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ö ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤

prefix... // –≤ –≤—ã–∑–æ–≤–µ ‚Äî —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç —Å–ª–∞–π—Å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã.
```

```go

```

# defer

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–æ–∂–∏—Ç—å –∫–∞–∫–æ–µ-—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ. –û–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏, –ø–æ—Å–ª–µ return, –¥–µ–π—Å—Ç–≤–∏–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–∞–∂–µ –µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –ø–∞–Ω–∏–∫–∞.

–£–¥–æ–±–Ω–æ, –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤

```go
func example() {
	defer fmt.Println("–ü–µ—Ä–≤—ã–π")
	defer fmt.Println("–í—Ç–æ—Ä–æ–π")
	defer fmt.Println("–¢—Ä–µ—Ç–∏–π")
}

// –¢—Ä–µ—Ç–∏–π
// –í—Ç–æ—Ä–æ–π
// –ü–µ—Ä–≤—ã–π

```

–ó–¥–µ—Å—å defer –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –æ—à–∏–±–∫–∏

```go

func DoSomeInserts(ctx context.Context, db *sql.DB, value1, value2 string) (err error) {
	tx, err := db.BeginTx(ctx, nil)
	if err != nil {
		return err
	}
	defer func() {
		if err == nil {
			err = tx.Commit()
		}
		if err != nil {
			tx.Rollback()
		}
	}()
	_, err = tx.ExecContext(ctx, "INSERT INTO FOO (val) values $1", value1)
	if err != nil {
		return err
	}
	// –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –µ—â–µ —Ä—è–¥ –æ–ø–µ—Ä–∞—Ü–∏–π –≤—Å—Ç–∞–≤–∫–∏, –∏—Å–ø–æ–ª—å–∑—É—è tx
	return nil
}

```

## defer –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—è –ø—Ä–∏ os.Exit()

# –û–û–ü –≤ golang

–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –∏ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º ‚Äî —ç—Ç–æ —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–∞ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è (–û–û–ü). –î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –∏ –ø—Ä–∏–≤–µ–¥–µ–º –ø—Ä–∏–º–µ—Ä—ã –Ω–∞ —è–∑—ã–∫–µ Go (Golang).

## 1. –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ

–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–∏–ª–∏ –∫–ª–∞—Å—Å—ã), –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Å–ª–µ–¥—É—é—Ç —Å–≤–æ–π—Å—Ç–≤–∞ –∏ –º–µ—Ç–æ–¥—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä. –í Go –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ.

```go
package main

import "fmt"

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
type Animal struct {
	Name string
}

// –ú–µ—Ç–æ–¥ –¥–ª—è –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
func (a Animal) Speak() {
	fmt.Println("Animal speaks")
}

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—Å–ª–µ–¥—É–µ—Ç Animal
type Dog struct {
	Animal // –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ
	Breed  string
}

// –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –º–µ—Ç–æ–¥ Speak
func (d Dog) Speak() {
	fmt.Println("Woof! My name is", d.Name)
}

func main() {
	dog := Dog{
		Animal: Animal{Name: "Buddy"},
		Breed:  "Golden Retriever",
	}
	dog.Speak() // –í—ã–≤–æ–¥: Woof! My name is Buddy
}
```

## 2. –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è

–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –¥–∞–Ω–Ω—ã–º –∏ –º–µ—Ç–æ–¥–∞–º –æ–±—ä–µ–∫—Ç–∞. –í Go —ç—Ç–æ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö –∏ –Ω–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ (—Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –∏ —Å—Ç—Ä–æ—á–Ω–æ–π –±—É–∫–≤—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ).

```go
package main

import "fmt"

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–µ–π
type Person struct {
	name string // –Ω–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–æ–µ –ø–æ–ª–µ
	Age  int    // —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–æ–µ –ø–æ–ª–µ
}

// –ú–µ—Ç–æ–¥ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–º–µ–Ω–∏
func (p *Person) SetName(name string) {
	p.name = name
}

// –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–º–µ–Ω–∏
func (p *Person) GetName() string {
	return p.name
}

func main() {
	person := Person{Age: 30}
	person.SetName("Alice")
	fmt.Println("Name:", person.GetName()) // –í—ã–≤–æ–¥: Name: Alice
}
```

## 3. –ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º

–ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏. –í Go –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã.

```go
package main

import "fmt"

// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
type Speaker interface {
	Speak()
}

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Cat
type Cat struct {
	Name string
}

// –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞ Speak –¥–ª—è Cat
func (c Cat) Speak() {
	fmt.Println("Meow! My name is", c.Name)
}

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Dog
type Dog struct {
	Name string
}

// –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞ Speak –¥–ª—è Dog
func (d Dog) Speak() {
	fmt.Println("Woof! My name is", d.Name)
}

// –§—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Speaker
func makeItSpeak(s Speaker) {
	s.Speak()
}

func main() {
	cat := Cat{Name: "Whiskers"}
	dog := Dog{Name: "Buddy"}

	makeItSpeak(cat) // –í—ã–≤–æ–¥: Meow! My name is Whiskers
	makeItSpeak(dog) // –í—ã–≤–æ–¥: Woof! My name is Buddy
}
```

–í —ç—Ç–∏—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –º—ã –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –û–û–ü –≤ Go: –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ, –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—é —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö –∏ –Ω–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö –ø–æ–ª–µ–π, –∞ —Ç–∞–∫–∂–µ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã.

–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å—Ç—å —Ç–∞–∫–æ–π –∫–æ–¥

```go
package main

import (
	"fmt"
)

type celsius float64

type temperature struct {
	high, low celsius
}

type location struct {
	lat, long float64
}

type report struct {
	sol int
	temperature
	location
}

// –û–±—ä—è–≤–∏–º –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ —Å—Ä–µ–¥–Ω–µ–π (–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–π) —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
func (t temperature) average() celsius {
	return (t.high + t.low) / 2
}

// –§—É–Ω–∫—Ü–∏—è –æ–±—ë—Ä—Ç–∫–∞
// –ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ
// –ù—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ, –µ—Å–ª–∏ –±—ã –º—ã —Ö–æ—Ç–µ–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–∞–∫—É—é-—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É
func (r report) average() celsius {
	return r.temperature.average()
}

func main() {
	t := temperature{high: -1.0, low: -78.0}

	report := report{sol: 15, temperature: t}
	fmt.Printf("average %v¬∫ C\n", report.temperature.average())
	fmt.Printf("average %v¬∫ C\n", report.average())
}

```

–£–¥–æ–±–Ω–æ –∂–µ, –ø—Ä–∞–≤–¥–∞? –ù–æ –º–æ–∂–Ω–æ –ø—Ä–æ—â–µ)

> –§—É–Ω–∫—Ü–∏—è –æ–±—ë—Ä—Ç–∫–∞ –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º —Å–¥–µ–ª–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É. –ú–æ–∂–Ω–æ –∏ –±–µ–∑ –Ω–µ—ë
>

## –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è (–≠–º–±–µ–¥–∏–Ω–≥–∏)

```go
package main

import (
	"fmt"
)

type celsius float64

type temperature struct {
	high, low celsius
}

type location struct {
	lat, long float64
}

type report struct {
	sol int
	temperature
	location
}

// –û–±—ä—è–≤–∏–º –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ —Å—Ä–µ–¥–Ω–µ–π (–∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–π) —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
func (t temperature) average() celsius {
	return (t.high + t.low) / 2
}

func main() {
	report := report{
		sol:         15,
		location:    location{-4.5895, 137.4417},
		temperature: temperature{high: -1.0, low: -78.0},
	}

	// –ú–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –∫–∞–∫
	fmt.Printf("average %v¬∫ C\n", report.average())

	// –¢–∞–∫ –∂–µ –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å
	fmt.Printf("average %v¬∫ C\n", report.temperature.average())
}

```

–ï—â—ë –æ–¥–∏–Ω –ø—Ä–∏–º–µ—Ä –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –≤ Golang

```go
package main

import "fmt"

// —Å–æ–∑–¥–∞–¥–∏–º alias
type sol int

type celsius float64

type temperature struct {
	high, low celsius
}

type location struct {
	lat, long float64
}

type report struct {
	sol
	location    location
	temperature temperature
}

// —Å–æ–∑–¥–∞–¥–∏–º –º–µ—Ç–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã sol
func (s sol) days(s2 sol) sol {
	days := s2 - s
	if days < 0 {
		days = -days
	}
	return days
}

func main() {
	report := report{sol: 15}

	duration := sol(1446)

	fmt.Println(report.sol.days(duration))
	fmt.Println(report.days(duration))
}

```

> **–í–∞–∂–Ω—ã–π –Ω—é–∞–Ω—Å**
>

```go
// –¢–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å –±—É–¥–µ—Ç
type report struct {
	sol
	location    location
	temperature temperature
}

// –ê —Ç–∞–∫ —É–∂–µ –Ω–µ—Ç
type report struct {
	sol sol
	location    location
	temperature temperature
}
```

–ë–µ–∑ –∏–º–µ–Ω–∏ –ø–æ–ª—è, —Ç–æ–ª—å–∫–æ sol ‚Äî —ç—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **–≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ** (**embedding**). –≠—Ç–æ –∫–∞–∫ –±—É–¥—Ç–æ report ¬´–Ω–∞—Å–ª–µ–¥—É–µ—Ç¬ª –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏ –ø–æ–ª—è sol –Ω–∞–ø—Ä—è–º—É—é. –¢–æ –µ—Å—Ç—å report —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫–∞–∫ –±—ã —Å–æ–ª–æ–º, –∏ —Ç—ã –º–æ–∂–µ—à—å –ø–∏—Å–∞—Ç—å:

```go
report.days(duration)
```

–ü–æ—Ç–æ–º—É —á—Ç–æ report —Å–∞–º –∑–Ω–∞–µ—Ç –ø—Ä–æ –º–µ—Ç–æ–¥ days, –±–ª–∞–≥–æ–¥–∞—Ä—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—é.

–° —É–∫–∞–∑–∞–Ω–∏–µ–º –∏–º–µ–Ω–∏ –ø–æ–ª—è ‚Äî —ç—Ç–æ –æ–±—ã—á–Ω–æ–µ –ø–æ–ª–µ. –¢—É—Ç sol ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –∞ –Ω–µ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ.  –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ report —É–∂–µ –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ –º–µ—Ç–æ–¥ days, –ø–æ—Ç–æ–º—É —á—Ç–æ sol –≤–Ω—É—Ç—Ä–∏ –∫–∞–∫ –∫–æ—Ä–æ–±–æ—á–∫–∞, –∏ –º–µ—Ç–æ–¥ days –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å —á–µ—Ä–µ–∑ –Ω–µ—ë:

```go
report.sol.days(duration) // —Ç–æ–ª—å–∫–æ —Ç–∞–∫

//—É–∂–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ report —Å–∞–º —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –Ω–µ –ø–æ–ª—É—á–∏–ª
report.days(duration) // –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

–ö–∞–∫ –Ω–∞–ø–∏—Å–∞–Ω–æ | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç | –ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥
 | –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ. –ú–µ—Ç–æ–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã —É report. | report.days(...)
| –ü—Ä–æ—Å—Ç–æ –ø–æ–ª–µ. –ú–µ—Ç–æ–¥—ã –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã —É report. | report.sol.days(...)

| –ö–∞–∫ –Ω–∞–ø–∏—Å–∞–Ω–æ | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç | –ö–∞–∫ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ |
| --- | --- | --- |
| sol | –í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ. –î–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ –º–µ—Ç–æ–¥—ã report | report.days(‚Ä¶) |
| sol sol | –ü—Ä–æ—Å—Ç–æ –ø–æ–ª–µ. –ú–µ—Ç–æ–¥—ã report –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã | report.sol.days(‚Ä¶) |

### –ö–∞–∫ –ø–æ–Ω—è—Ç—å –∫–æ–≥–¥–∞ –ø–∏—Å–∞—Ç—å —Å –∏–º–µ–Ω–µ–º, –∫–æ–≥–¥–∞ –±–µ–∑:

- –ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ä–∞–∑—É ¬´—É–º–µ–ª–∞¬ª –≤—Å—ë, —á—Ç–æ —É–º–µ–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Ç–∏–ø ‚Äî¬†**–ø–∏—à–∏ –±–µ–∑ –∏–º–µ–Ω–∏**(embedding).
- –ï—Å–ª–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏ —Ç—ã –Ω–µ —Ö–æ—á–µ—à—å –Ω–∞–ø—Ä—è–º—É—é —Å–≤—è–∑—ã–≤–∞—Ç—å —Ç–∏–ø—ã ‚Äî¬†**–ø–∏—à–∏ —Å –∏–º–µ–Ω–µ–º**¬†(–æ–±—ã—á–Ω–æ–µ –ø–æ–ª–µ).

## –ï—â—ë –ø—Ä–∏–º–µ—Ä—ã –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è

–ë–µ–∑ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è

```go
package main

import "fmt"

type Engine struct{}

func (e Engine) Start() {
	fmt.Println("–î–≤–∏–≥–∞—Ç–µ–ª—å –∑–∞–ø—É—â–µ–Ω")
}

type Car struct {
	engine Engine  // –æ–±—ã—á–Ω–æ–µ –ø–æ–ª–µ
}

func main() {
	myCar := Car{engine: Engine{}}
	myCar.engine.Start()  // –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –ø–æ–ª–µ
}

```

–°–æ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ–º

```go
package main

import "fmt"

type Engine struct{}

func (e Engine) Start() {
	fmt.Println("–î–≤–∏–≥–∞—Ç–µ–ª—å –∑–∞–ø—É—â–µ–Ω")
}

type Car struct {
	engine Engine  // –æ–±—ã—á–Ω–æ–µ –ø–æ–ª–µ
}

func main() {
	myCar := Car{engine: Engine{}}
	myCar.engine.Start()  // –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –ø–æ–ª–µ
}

```

# –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ Golang

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äì¬†—ç—Ç–æ –Ω–∞–±–æ—Ä –º–µ—Ç–æ–¥–æ–≤. –ï—Å–ª–∏ —É —Ç–∏–ø–∞ –µ—Å—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–µ—Ç–æ–¥—ã, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ –æ–Ω —Ä–µ–∞–ª–∏–∑—É–µ—Ç —ç—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äú–ü—É–ª—å—Ç –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è‚Äù, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–≤–∞ –º–µ—Ç–æ–¥–∞: –≤–∫–ª—é—á–∏—Ç—å –∏ –≤—ã–∫–ª—é—á–∏—Ç—å.

–≠—Ç–æ—Ç –ø—É–ª—å—Ç –ø–æ–¥–æ–π–¥—ë—Ç –¥–ª—è –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞), —É –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å –º–µ—Ç–æ–¥—ã –≤–∫–ª—é—á–∏—Ç—å –∏ –≤—ã–∫–ª—é—á–∏—Ç—å (–¢–µ–ª–µ–≤–∏–∑–æ—Ä, –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä, –≤–∏–±—Ä–∞—Ç–æ—Ä)

–ü—Ä–∏–º–µ—Ä

```go
package main

import "fmt"

// Define an interface
type Animal interface {
	Speak() string
}

// Dog type
type Dog struct{}

func (d Dog) Speak() string {
	return "Woof!"
}

// Cat type
type Cat struct{}

func (c Cat) Speak() string {
	return "Meow!"
}

// Use the interface
func makeItSpeak(a Animal) {
	fmt.Println(a.Speak())
}

func main() {
	d := Dog{}
	c := Cat{}

	makeItSpeak(d) // Output: Woof!
	makeItSpeak(c) // Output: Meow!
}
```

–ò —Å–æ–±–∞–∫–∞, –∏ –∫–æ—à–∫–∞ —Ä–µ–∞–ª–∏–∑—É—é—Ç —Ñ—É–Ω–∫—Ü–∏—é Speak(), –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Animal.

## –ï—â–µ –æ–¥–Ω–æ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ñ–µ–π—Å–æ–≤

–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö —Ñ–æ–∫—É—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Ç–æ–º, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ –Ω–∏—Ö —Ö—Ä–∞–Ω—è—Ç—Å—è (int, string, float64 –∏ —Ç–¥)

–ú–µ—Ç–æ–¥—ã –≤—ã—Ä–∞–∂–∞—é—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–∞.

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∫–∞–∫ —Ä–∞–∑ —Ñ–æ–∫—É—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ —Ç–∏–ø–æ–≤, –∞ –Ω–µ –Ω–∞ —Ç–æ–º, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è.

```go
package main

import (
	"fmt"
	"strings"
)

// t –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –ª—é–±–æ–π –æ–±—ä–µ–∫—Ç, –µ—Å–ª–∏ —É –Ω–µ–≥–æ –µ—Å—Ç—å
// –º–µ—Ç–æ–¥ talk(), –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É.
var t interface {
	talk() string
}

// –≠—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ martian. –£ –Ω–µ—ë –µ—Å—Ç—å –º–µ—Ç–æ–¥ talk(), –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç
// —Å—Ç—Ä–æ–∫—É "nack nack".
// –û–Ω–∞ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–µ—ë –µ—Å—Ç—å
// –Ω—É–∂–Ω—ã–π –º–µ—Ç–æ–¥.
type martian struct{}

func (m martian) talk() string {
	return "nack nack"
}

// —Ç–æ–∂–µ —É–∂–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
// —Ç–æ–∂–µ –µ—Å—Ç—å –º–µ—Ç–æ–¥–æ–º talk() string
type laser int

func (l laser) talk() string {
	return strings.Repeat("pew ", int(l))
}

func main() {
		var t interface {
			talk() string
			}
			t = martian{}
			fmt.Println(t.talk())
			t = laser(3)
		fmt.Println(t.talk())
}

```

***–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ***

–û–±—ã—á–Ω–æ –Ω–∞–∑—ã–≤–∞—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å —Å—É—Ñ—Ñ–∏–∫–æ—Å–æ–º -er.

talker ‚Äì –≤—Å—ë, —É —á–µ–≥–æ –µ—Å—Ç—å –º–µ—Ç–æ–¥ talk

```go
type talker interface {
		talk() string
}

// –ù–∞–ø—Ä–∏–º–µ—Ä, —ç—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
// –≤–æ—Ç —Ç–∞–∫ –≤ –¥–∞–ª—å–Ω–µ—à–µ–º
func shout(t talker) {
		louder := strings.ToUpper(t.talk())
		fmt.Println(louder)
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

–í Go –≤–Ω—É—Ç—Ä–∏ –ø–∞–∫–µ—Ç–∞ fmt (–∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–µ—á–∞—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å)

–µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```go
type Stringer interface {
    String() string
}
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç: üëâ –µ—Å–ª–∏ —Ç–≤–æ–π —Ç–∏–ø (–Ω–∞–ø—Ä–∏–º–µ—Ä, location) –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥ String() string, —Ç–æ fmt.Println() –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –∫–∞–∫ –∫—Ä–∞—Å–∏–≤–æ –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —Ç–≤–æ–π –æ–±—ä–µ–∫—Ç.

–ï—Å–ª–∏ –±–µ–∑ –º–µ—Ç–æ–¥–∞ String()

```go
type location struct {
    lat, long float64
}

curiosity := location{-4.5895, 137.4417}
fmt.Println(curiosity) // {-4.5895 137.4417}
```

–° –º–µ—Ç–æ–¥–æ–º

```go
func (l location) String() string {
    return fmt.Sprintf("%v, %v", l.lat, l.long)
}

fmt.Println(curiosity) // -4.5895, 137.4417
```

fmt.Println() –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
**–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ª–∏ –æ–±—ä–µ–∫—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Stringer?**

- –ï—Å–ª–∏ –¥–∞ ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç —Ç–≤–æ–π –º–µ—Ç–æ–¥ String()
- –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø–µ—á–∞—Ç–∞–µ—Ç –∫–∞–∫ –µ—Å—Ç—å (struct —Å–æ —Å–∫–æ–±–∫–∞–º–∏ –∏ –ø–æ–ª—è–º–∏).

–¢–æ –µ—Å—Ç—å –º–æ–∂–Ω–æ —Å–∞–º–æ–º—É –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å Println —Ç–≤–æ–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞

### –ö–∞–∫ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ —Ç–µ—Å—Ç–∞—Ö?

–°—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–¥–º–µ–Ω—è—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ —Ñ–µ–π–∫–æ–≤—ã–µ –≤ —Ç–µ—Å—Ç–∞—Ö

–ù–∞–ø—Ä–∏–º–µ—Ä, –±—ã–ª –≤–æ—Ç —Ç–∞–∫–æ–π –∫–æ–¥

```go
var DB *sql.DB // –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è

func GetUserName(id int) (string, error) {
	var name string
	err := DB.QueryRow("SELECT name FROM users WHERE id = $1", id).Scan(&name)
	if err != nil {
		return "", err
	}
	return name, nil
}

```

üëâ –ú–∏–Ω—É—Å—ã:

- –≤ —Ç–µ—Å—Ç–µ¬†`DB`¬†–≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–∞—Å—Ç–æ—è—â–∏–π (–∏–ª–∏ –Ω—É–∂–Ω–æ –º—É—Ç–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π –º–æ–∫);
- —Ç–µ—Å–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ Postgres.

–° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

```go
// –û–±—ä—è–≤–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
type Storage interface {
	GetUserName(id int) (string, error)
}

// –ò —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
func PrintUserName(storage Storage, id int) {
	name, err := storage.GetUserName(id)
	if err != nil {
		fmt.Println("error:", err)
		return
	}
	fmt.Println("User:", name)
}

```

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```go
type SQLStorage struct {
	DB *sql.DB
}

func (s *SQLStorage) GetUserName(id int) (string, error) {
	var name string
	err := s.DB.QueryRow("SELECT name FROM users WHERE id = $1", id).Scan(&name)
	if err != nil {
		return "", err
	}
	return name, nil
}

```

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤

```go
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞-–º–æ–∫
type FakeStorage struct{}

// –§—É–Ω–∫—Ü–∏—è-–º–æ–∫
func (f *FakeStorage) GetUserName(id int) (string, error) {
	return "TestUser", nil
}

```

–ö–∞–∫ –≤ –∏—Ç–æ–≥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

```go
func main() {
	// üîπ –±–æ–µ–≤–æ–π —Ä–µ–∂–∏–º
	realStorage := &SQLStorage{DB: realDB}
	PrintUserName(realStorage, 1)

	// üîπ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
	fakeStorage := &FakeStorage{}
	PrintUserName(fakeStorage, 42) // –≤—Å–µ–≥–¥–∞ –≤–µ—Ä–Ω—ë—Ç "TestUser"
}
```

# –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –§–∞–±—Ä–∏–∫–∞

–§–∞–±—Ä–∏–∫–∞ ‚Äì —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–∑–¥–∞—ë—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç

```go
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞, —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–æ—Ç–æ—Ä–æ–π –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å
type fakeEntry struct {
	name  string
	isDir bool
}

// –§–∞–±—Ä–∏–∫–∏
func fakeFile(name string) os.DirEntry {
	return &fakeEntry{name: name, isDir: false}
}

func fakeDir(name string) os.DirEntry {
	return &fakeEntry{name: name, isDir: true}
}

// –ë–µ–∑ —Ñ–∞–±—Ä–∏–∫–∏
entries: []os.DirEntry{
	&fakeEntry{name: "f1", isDir: false},
	&fakeEntry{name: "f2", isDir: false},
	&fakeEntry{name: "d1", isDir: true},
}

// –° —Ñ–∞–±—Ä–∏–∫–æ–≤
entries: []os.DirEntry{
	fakeFile("f1"),
	fakeFile("f2"),
	fakeDir("d1"),
}
```

–í–æ—Ç –µ—â—ë –ø—Ä–∏–º–µ—Ä

```go
package main

import "fmt"

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –ß–µ–ª–æ–≤–µ–∫
type Person struct {
	name string
	age  int
}

// –§–∞–±—Ä–∏—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–∑—Ä–æ—Å–ª–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞
func NewAdult(name string) Person {
	return Person{name: name, age: 30}
}

// –§–∞–±—Ä–∏—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–±—ë–Ω–∫–∞
func NewChild(name string) Person {
	return Person{name: name, age: 5}
}

func main() {
	// –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∞–±—Ä–∏–∫–∏ –≤–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
	alice := NewAdult("Alice")
	bobby := NewChild("Bobby")

	fmt.Println(alice) // –í—ã–≤–æ–¥: {Alice 30}
	fmt.Println(bobby) // –í—ã–≤–æ–¥: {Bobby 5}
}

```

## –ê–¥–∞–ø—Ç–µ—Ä

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –ø–æ–¥ –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```go
package main

import "fmt"

// –ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º: —É –Ω–∞—Å –µ—Å—Ç—å –∏–≥—Ä–∞, –≥–¥–µ –≤—Å–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –¥–æ–ª–∂–Ω—ã —É–º–µ—Ç—å –∞—Ç–∞–∫–æ–≤–∞—Ç—å
type Fighter interface {
	Attack() string
}

// –£ –Ω–∞—Å –µ—Å—Ç—å —Ä—ã—Ü–∞—Ä—å - –æ–Ω —É–º–µ–µ—Ç –∞—Ç–∞–∫–æ–≤–∞—Ç—å
type Knight struct {
	name string
}

func (k *Knight) Attack() string {
	return fmt.Sprintf("%s –∞—Ç–∞–∫—É–µ—Ç –º–µ—á–æ–º!", k.name)
}

// –ù–æ –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —Ä–æ–±–æ—Ç–∞ –∏–∑ –¥—Ä—É–≥–æ–π –∏–≥—Ä—ã
// –£ —Ä–æ–±–æ—Ç–∞ –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥ - –æ–Ω —Å—Ç—Ä–µ–ª—è–µ—Ç, –∞ –Ω–µ –∞—Ç–∞–∫—É–µ—Ç
type OldRobot struct {
	model string
}

func (r *OldRobot) Shoot() string {
	return fmt.Sprintf("–†–æ–±–æ—Ç %s —Å—Ç—Ä–µ–ª—è–µ—Ç –ª–∞–∑–µ—Ä–æ–º!", r.model)
}

// –ê–¥–∞–ø—Ç–µ—Ä! –û–Ω "–ø–µ—Ä–µ–≤–æ–¥–∏—Ç" —Ä–æ–±–æ—Ç–∞ –≤ –ø–æ–Ω—è—Ç–Ω—ã–π –¥–ª—è –∏–≥—Ä—ã —Ñ–æ—Ä–º–∞—Ç
type RobotAdapter struct {
	robot *OldRobot
}

// –ê–¥–∞–ø—Ç–µ—Ä –¥–µ–ª–∞–µ—Ç –≤–∏–¥, —á—Ç–æ —Ä–æ–±–æ—Ç —É–º–µ–µ—Ç –∞—Ç–∞–∫–æ–≤–∞—Ç—å (–∫–∞–∫ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ)
func (adapter *RobotAdapter) Attack() string {
	// –í–Ω—É—Ç—Ä–∏ –æ–Ω –ø—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ —Å—Ç—Ä–µ–ª—å–±—ã —Ä–æ–±–æ—Ç–∞
	return adapter.robot.Shoot()
}

// –§—É–Ω–∫—Ü–∏—è –±–æ—è - –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º Fighter
func StartBattle(fighter Fighter) {
	fmt.Println(fighter.Attack())
}

func main() {
	// –û–±—ã—á–Ω—ã–π —Ä—ã—Ü–∞—Ä—å
	knight := &Knight{name: "–ê—Ä—Ç—É—Ä"}

	// –°—Ç–∞—Ä—ã–π —Ä–æ–±–æ—Ç (–Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∏–≥—Ä—ã –Ω–∞–ø—Ä—è–º—É—é)
	oldRobot := &OldRobot{model: "T-800"}

	// –ê–¥–∞–ø—Ç–µ—Ä –¥–ª—è —Ä–æ–±–æ—Ç–∞
	robotAdapter := &RobotAdapter{robot: oldRobot}

	fmt.Println("=== –ë–û–ô –ù–ê–ß–ò–ù–ê–ï–¢–°–Ø ===")

	// –†—ã—Ü–∞—Ä—å –º–æ–∂–µ—Ç —Å—Ä–∞–∂–∞—Ç—å—Å—è —Å—Ä–∞–∑—É
	StartBattle(knight)

	// –†–æ–±–æ—Ç –º–æ–∂–µ—Ç —Å—Ä–∞–∂–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä
	StartBattle(robotAdapter)

	fmt.Println("\n=== –í—Å–µ –±–æ–π—Ü—ã –≤ –æ–¥–Ω–æ–º —Å–ø–∏—Å–∫–µ ===")

	// –¢–µ–ø–µ—Ä—å –º–æ–∂–µ–º –≤—Å–µ—Ö –¥–æ–±–∞–≤–∏—Ç—å –≤ –æ–¥–∏–Ω —Å–ø–∏—Å–æ–∫!
	fighters := []Fighter{knight, robotAdapter}

	for _, fighter := range fighters {
		StartBattle(fighter)
	}
}
```

- –ï—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å¬†`AudioPlayer`¬†—Å –º–µ—Ç–æ–¥–æ–º¬†`Play(file string)`.
- –ï—Å—Ç—å —Å—Ç–∞—Ä—ã–π¬†`CassettePlayer`¬†—Å –º–µ—Ç–æ–¥–æ–º¬†`PlayTape(filename string)`.
- –°–¥–µ–ª–∞–π –∞–¥–∞–ø—Ç–µ—Ä.

```go
package main

import "fmt"

type AudioPlayer interface {
	Play(file string)
}

// –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
type CassettePlayer struct {
	year string
}

// –ú–µ—Ç–æ–¥ —Å—Ç–∞—Ä–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
func (c *CassettePlayer) PlayTape(filename string) {
	fmt.Println("Playing ", filename)
}

type Adapter struct {
	old *CassettePlayer
}

func (a *Adapter) Play(file string) {
	newString := "New " + file
	a.old.PlayTape(newString)
}

func main() {
	oldThing := &CassettePlayer{year: "2000"}
	newThing := &Adapter{oldThing}
	newThing.Play("My favorite music")
	fmt.Println(newThing.old.year)
}

```

–ï—â—ë –ø—Ä–∏–º–µ—Ä (–∏–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞)

```go
package main

import (
	"context"

	"github.com/redis/go-redis/v9"
	"github.com/stretchr/testify/mock"
)

// –°–æ–∑–¥–∞–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
type UserManager interface {
	ListMembers(ctx context.Context, key string) ([]string, error)
}

// –ù–∞—à–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
type AdminService struct {
	UserManager UserManager
}

// –§–∞–±—Ä–∏–∫–∞ AdminService —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é –æ—Ç
// –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
func NewAdminService(userManager UserManager) *AdminService {
	return &AdminService{
		UserManager: userManager,
	}
}

// –¢–æ—Ç —Å–∞–º—ã–π –∞–¥–∞–ø—Ç–µ—Ä
//
// # –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º –≤ —Å–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
//
// –†–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å UserManager
type RedisUserManager struct {
	RedisClient *redis.Client
}

// –†–µ–∞–ª–∏–∑—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
//
// –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
func (r *RedisUserManager) ListMembers(ctx context.Context, key string) ([]string, error) {
	return r.RedisClient.SMembers(ctx, key).Result()
}

// –§–∞–±—Ä–∏–∫–∞ UserManager
func NewRedisUserManager(client *redis.Client) *RedisUserManager {
	return &RedisUserManager{RedisClient: client}
}

// –ú–æ–∫–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
type MockUserManager struct {
	mock.Mock
}

// –§–∞–±—Ä–∏–∫–∞ MockUserManager
func NewMockUserManager() *MockUserManager {
	return &MockUserManager{}
}

// –°–æ–∑–¥–∞—ë–º –º–æ–∫
//
// # –†–µ–∞–ª–∏–∑—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
//
// –ú–æ–∫–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
func (m *MockUserManager) ListMembers(ctx context.Context, key string) ([]string, error) {
	args := m.Called(ctx, key)
	return args.Get(0).([]string), args.Error(1)
}

func main() {
	// –î–ª—è production
	userManager := NewRedisUserManager(client * redis.Client)
	AdminService := NewAdminService(userManager)

	// –î–ª—è —Ç–µ—Å—Ç–æ–≤
	mockUserManager := NewMockUserManager()
	AdminService = NewAdminService(mockUserManager)
}

```

–¢–æ –µ—Å—Ç—å –∞–¥–∞–ø—Ç–µ—Ä –ø—Ä–æ—Å—Ç–æ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤ –Ω–∞—à—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–µ–∞–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é. –ê –¥–∞–ª—å—à–µ –¥–ª—è —Å–≤–æ–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º—ã –º–æ–∂–µ–º –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ª—é–±—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞—à–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å:

–ü–∞—Ç—Ç–µ—Ä–Ω –ê–¥–∞–ø—Ç–µ—Ä –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–µ–Ω –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ API, –º–∏–≥—Ä–∞—Ü–∏–∏ –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫, –∏–ª–∏ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å —Ä–∞–∑–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –ø–æ–¥ –æ–±—â–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

–ò–ª–∏

- –£ —Ç–µ–±—è –µ—Å—Ç—å¬†**–≥–æ—Ç–æ–≤—ã–π —Å—Ç–∞—Ä—ã–π –∫–æ–¥**¬†(—Ä–æ–±–æ—Ç), –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç
- –ù–µ —Ö–æ—á–µ—Ç—Å—è¬†**–ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å**¬†–≤–µ—Å—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥
- –ù—É–∂–Ω–æ —á—Ç–æ–±—ã¬†**–Ω–æ–≤—ã–π –∏ —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–ª–∏ –≤–º–µ—Å—Ç–µ**

–ê–¥–∞–ø—Ç–µ—Ä —Ä–µ—à–∞–µ—Ç —ç—Ç–æ - –æ–Ω –∫–∞–∫ "–º–æ—Å—Ç–∏–∫" –º–µ–∂–¥—É —Å—Ç–∞—Ä—ã–º –∏ –Ω–æ–≤—ã–º –∫–æ–¥–æ–º!

–ï—â—ë –ø—Ä–∏–º–µ—Ä

## Dependency Injection (–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

–≠—Ç–æ –∫–æ–≥–¥–∞ –∫–æ–¥ –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–Ω–∞—Ä—É–∂–∏ (–∞ –Ω–µ –∫–æ–≥–¥–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∑–∞—à–∏—Ç—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–¥–∞)

–ë–µ–∑ DI (–∂—ë—Å—Ç–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å)

```go
package main

import (
	"github.com/gin-gonic/gin"
	"net/http"
)

type UserRepo struct{}

func (r *UserRepo) GetUser() string {
	return "Alice"
}

// –í–æ—Ç –∑–¥–µ—Å—å –ø—Ä–æ–±–ª–µ–º–∞. UserHandler –æ–±—è–∑–∞–Ω
// –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É UserRepo
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ–ª—å–∑—è
type UserHandler struct {
	repo *UserRepo
}

// –ò –∑–¥–µ—Å—å –Ω–∞–º —Ç–æ–∂–µ —É–∂–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
// –∏–º–µ–Ω–Ω–æ UserRepo
func NewUserHandler() *UserHandler {
	return &UserHandler{repo: &UserRepo{}}
}

func (h *UserHandler) GetUser(c *gin.Context) {
	c.String(http.StatusOK, h.repo.GetUser())
}

func main() {
	r := gin.Default()

	handler := NewUserHandler()
	r.GET("/user", handler.GetUser)

	r.Run(":8080")
}

```

C DI

```go
package main

import (
	"github.com/gin-gonic/gin"
	"net/http"
)

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
type UserRepo interface {
	GetUser() string
}

// –†–µ–∞–ª—å–Ω–∞—è –ë–î
type DbUserRepo struct{}

// –†–µ–∞–ª–∏–∑—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
func (r *DbUserRepo) GetUser() string {
	return "Alice from DB"
}

// –§–µ–π–∫–æ–≤–∞—è –ë–î –¥–ª—è —Ç–µ—Å—Ç–æ–≤
type MockUserRepo struct{}

// –†–µ–∞–ª–∏–∑—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
func (r *MockUserRepo) GetUser() string {
	return "Alice from Mock"
}

// –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
// –¢–æ –µ—Å—Ç—å –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—ë, —á—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
type UserHandler struct {
	repo UserRepo
}

// –¢—É—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Å–Ω–∞—Ä—É–∂–∏
// –í –∫–∞—á–µ—Ç—Å–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤—Å—ë, —á—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç
// –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
func NewUserHandler(repo UserRepo) *UserHandler {
	return &UserHandler{repo: repo}
}

func (h *UserHandler) GetUser(c *gin.Context) {
	c.String(http.StatusOK, h.repo.GetUser())
}

// –í production
func main() {
	r := gin.Default()

	// –í —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ –ø–µ—Ä–µ–¥–∞—ë–º —Ä–µ–∞–ª—å–Ω—É—é –ë–î
	handler := NewUserHandler(&DbUserRepo{})
	r.GET("/user", handler.GetUser)

	r.Run(":8080")
}

// –í —Ç–µ—Å—Ç–∞—Ö
func main() {
	r := gin.Default()

	// –ê —Ç—É—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, –º—ã –ø–µ—Ä–µ–¥–∞—ë–º –º–æ–∫ (–¥–ª—è —Ç–µ—Å—Ç–æ–≤)
	handler := NewUserHandler(&MockUserRepo{})
	r.GET("/user", handler.GetUser)

	r.Run(":8080")
}

```

–ï—â—ë –ø—Ä–∏–º–µ—Ä

–ë–µ–∑ DI

```go
package main

import "fmt"

type UserRepo struct{}

func (r *UserRepo) GetUser() string {
	return "Alice"
}

// –ñ—ë—Å—Ç–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
type UserService struct {
	repo *UserRepo
}

// –ü—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–Ω–æ UserRepo
func NewUserService() *UserService {
	return &UserService{repo: &UserRepo{}}
}

func (s *UserService) PrintUser() {
	fmt.Println(s.repo.GetUser())
}

func main() {
	service := NewUserService()
	service.PrintUser()
}

```

–° DI

```go
package main

import "fmt"

type UserRepo interface {
	GetUser() string
}

// –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ—Å–∞
// –¢–æ –µ—Å—Ç—å –æ—Ç –Ω–∞–±–æ—Ä–∞ –º–µ—Ç–æ–¥–æ–≤
type UserService struct {
	repo UserRepo
}

// –†–µ–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
type DbUserRepo struct{}

// –†–µ–∞–ª–∏–∑—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
func (r *DbUserRepo) GetUser() string {
	return "Alice from DB"
}

// –ú–æ–∫ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
type MockUserRepo struct{}

// –†–µ–∞–ª–∏–∑—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
func (r *MockUserRepo) GetUser() string {
	return "Alice from Mock"
}

// –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è "—Å–Ω–∞—Ä—É–∂–∏"
// –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –≤—Å—ë, —á—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
func NewUserService(repo UserRepo) *UserService {
	return &UserService{repo: repo}
}

func (s *UserService) PrintUser() {
	fmt.Println(s.repo.GetUser())
}

func main() {
	// –í —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑—É
	service := NewUserService(&DbUserRepo{})
	service.PrintUser()

	// –í —Ç–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–æ–∫
	testService := NewUserService(&MockUserRepo{})
	testService.PrintUser()
}

```

### –ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–∑–¥–∞–Ω–∏—è di

1. –°–æ–∑–¥–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ —É–º–µ—Ç—å?)

```go
// –°–æ–∑–¥–∞—ë–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ —É–º–µ—Ç—å?)
type UserRepo interface {
    GetUser() string
}

// –°–æ–∑–¥–∞—ë–º –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (—Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –º–µ—Ç–æ–¥—ã –¥–ª—è –Ω–µ—ë)
type DbUserRepo struct{}
func (r *DbUserRepo) GetUser() string { return "Alice from DB" }

type MockUserRepo struct{}
func (r *MockUserRepo) GetUser() string { return "Alice from Mock" }

// –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ, –∫–æ—Ç–æ—Ä–∞—è –µ—ë –∏—Å–ø–æ–ª—å–∑—É–µ—Ç (—á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
type UserHandler struct {
    repo UserRepo // –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∞ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞!
}

// –î–µ–ª–∞–µ–º —Ñ–∞–±—Ä–∏–∫—É, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å–Ω–∞—Ä—É–∂–∏
func NewUserHandler(repo UserRepo) *UserHandler {
    return &UserHandler{repo: repo}
}

// –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –Ω—É–∂–Ω—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ –∫–æ–¥

// –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã
handler := NewUserHandler(&DbUserRepo{})

// –î–ª—è —Ç–µ—Å—Ç–æ–≤
handler := NewUserHandler(&MockUserRepo{})
```

# –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤ (–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞)

```go
package main

import (
	"fmt"
)

// / –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
type sol int
type celsius float64

// / –°—Ç—Ä—É–∫—Ç—É—Ä—ã
type report struct {
	sol
	location
	temperature
}

type temperature struct {
	high, low celsius
}

type location struct {
	lat, long float64
}

/// –§—É–Ω–∫—Ü–∏–∏

func (s sol) days(s2 sol) int {
	days := int(s2 - s)
	if days < 0 {
		days = -days
	}
	return days
}

func (l location) days(l2 location) int {
	// To-do: complicated distance calculation
	fmt.Println(l2)
	return 5
}

// "–ü–µ—Ä–µ–≥—Ä—É–∑–∏–º" —Ñ—É–Ω–∫—Ü–∏—é
// –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–ª–ª–∏–∑–∏–π –∏–º–µ–Ω
// –ó–¥–µ—Å—å –º—ã —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–æ–≤–∞–ª–∏ –≤—ã–∑–æ–≤ –Ω–∞ –º–µ—Ç–æ–¥ sol.days()
func (r report) days(s2 sol) int {
	return r.sol.days(s2)
}

func main() {

	t := temperature{
		high: 30.0,
		low:  15.0,
	}

	loc := location{
		lat:  0.0,
		long: 0.0,
	}

	r1 := report{
		1777,
		loc,
		t,
	}

	d := r1.days(1446)
	_ = d

	fmt.Println(d)
}

```

# –ó–∞–º—ã–∫–∞–Ω–∏—è

***–ó–∞–º—ã–∫–∞–Ω–∏–µ*** ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Ç–æ–π –æ–±–ª–∞—Å—Ç–∏, –≥–¥–µ –æ–Ω–∞ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞, –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–∞ –æ–±–ª–∞—Å—Ç—å —É–∂–µ –∑–∞–≤–µ—Ä—à–∏–ª–∞ —Ä–∞–±–æ—Ç—É.

```go
func counter() func() int {
    x := 0
    return func() int {
        x++
        return x
    }
}

c := counter()

fmt.Println(c())  // 1
fmt.Println(c())  // 2
fmt.Println(c())  // 3
```

–°–ª–æ–∂–Ω—ã–π –ø—Ä–∏–º–µ—Ä

```go
package main

import "fmt"

func adder() func(int) int {
	sum := 0
	return func(x int) int {
		sum += x
		return sum
	}
}

func main() {
	pos, neg := adder(), adder()
	for i := 0; i < 10; i++ {
		fmt.Printf("i = %d, pos(i) = %d, neg(-2i) = %d\n", i, pos(i), neg(-2*i))
	}
}

// i = 0, pos(i) = 0, neg(-2i) = 0
// i = 1, pos(i) = 1, neg(-2i) = -2
// i = 2, pos(i) = 3, neg(-2i) = -6
// i = 3, pos(i) = 6, neg(-2i) = -12
// i = 4, pos(i) = 10, neg(-2i) = -20
// i = 5, pos(i) = 15, neg(-2i) = -30
// i = 6, pos(i) = 21, neg(-2i) = -42
// i = 7, pos(i) = 28, neg(-2i) = -56
// i = 8, pos(i) = 36, neg(-2i) = -72
// i = 9, pos(i) = 45, neg(-2i) = -90
```

–û–±—ä—è—Å–Ω–µ–Ω–∏–µ

| i | pos(i) | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç pos | neg(-2*i) | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç neg |
| --- | --- | --- | --- | --- |
| 0 | pos(0)=0 | sum=0+0=0 | neg(0)=0 | sum=0+0=0 |
| 1 | pos(1)=1 | sum=0+1=1 | neg(-2)=-2 | sum=0+(-2)=-2 |
| 2 | pos(2)=3 | sum=1+2=3 | neg(-4)=-6 | sum=-2+(-4)=-6 |
| 3 | pos(3)=6 | sum=3+3=6 | neg(-6)=-12 | sum=-6+(-6)=-12 |
| 4 | pos(4)=10 | sum=6+4=10 | neg(-8)=-20 | sum=-12+(-8)=-20 |

–î–ª—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö (–¥–ª—è i=2): —É –Ω–∞—Å —É–∂–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Ö—Ä–∞–Ω–∏–ª–æ—Å—å –∑–Ω–∞—á–µ–Ω–∏–µ 1, –º—ã –¥–æ–±–∞–≤–∏–ª–∏ —Ç—É–¥–∞ 2

–î–ª—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö (–¥–ª—è i=2): —É –Ω–∞—Å —É–∂–µ –±—ã–ª–æ –∑–Ω–∞—á–µ–Ω–∏–µ -2, –º—ã –∫ –Ω–µ–º—É –ø—Ä–∏–±–∞–≤–ª—è–µ–º -2*i, —Ç–æ –µ—Å—Ç—å -2+(-2*2)=6

# Generic

```go
// –û–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

func SumInt(a, b int) int {
    return a + b
}
func SumFloat(a, b float64) float64 {
    return a + b
}

// –û–±–æ–±—â—ë–Ω–Ω—ã–µ generic
func Sum[T int | float64](a, b T) T {
    return a + b
}

```

üí° –î–ª—è —á–µ–≥–æ —ç—Ç–æ –Ω—É–∂–Ω–æ:

- –ß—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö.
- –î–µ–ª–∞–µ—Ç –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º.
- –£–ø—Ä–æ—â–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ —É–º–µ–Ω—å—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫.

# Resful API

üí° REST API –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç HTTP (–º–µ—Ç–æ–¥—ã: GET, POST, PUT, DELETE).
- –ë–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è: –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω *
- –û—Ç–≤–µ—Ç—ã –æ–±—ã—á–Ω–æ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ.
- –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–π, –ø–æ–Ω—è—Ç–Ω—ã–π –∏ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏.

* –°–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤

üëâ¬†**–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç, –∫—Ç–æ —Ç—ã –∏ —á—Ç–æ —Ç—ã –¥–µ–ª–∞–ª –¥–æ —ç—Ç–æ–≥–æ.**

–ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç (—Ç–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å, –æ–Ω –¥–æ–ª–∂–µ–Ω¬†**–≤—Å–µ –≤–∞–∂–Ω–æ–µ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ —ç—Ç–æ–º –∂–µ –∑–∞–ø—Ä–æ—Å–µ**:

- —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏,
- –ø–∞—Ä–∞–º–µ—Ç—Ä—ã,
- –¥–∞–Ω–Ω—ã–µ,
- –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

### –ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä—É—Ç–æ

- –°–µ—Ä–≤–µ—Ä –ø—Ä–æ—â–µ, –Ω–µ –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å "—Å–µ—Å—Å–∏–∏" –∏ "–∫—Ç–æ —Å –∫–µ–º –æ–±—â–∞–ª—Å—è".
- –õ—é–±–æ–π –∑–∞–ø—Ä–æ—Å –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ.
- –õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å (—Å–µ—Ä–≤–µ—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–º–∏, –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞ –ª—é–±–æ–π –∏–∑ –Ω–∏—Ö).

‚úÖ¬†**–ó–∞–ø–æ–º–Ω–∏ –∫–æ—Ä–æ—Ç–∫–æ:**

**Stateless** = —Å–µ—Ä–≤–µ—Ä –Ω–µ –¥–µ—Ä–∂–∏—Ç –≤ –ø–∞–º—è—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏. –í—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ ‚Äî –∫–ª–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç –∫–∞–∂–¥—ã–π —Ä–∞–∑

```go
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  GET   ‚îÇ üîç –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ            ‚îÇ
‚îÇ        ‚îÇ (–Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ—Ç)            ‚îÇ
‚îÇ        ‚îÇ –ü—Ä–∏–º–µ—Ä: "–ü–æ–∫–∞–∂–∏ —Å–ø–∏—Å–æ–∫!"      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  POST  ‚îÇ üßæ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç        ‚îÇ
‚îÇ        ‚îÇ –ü—Ä–∏–º–µ—Ä: "–î–æ–±–∞–≤—å –Ω–æ–≤–æ–≥–æ!"      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  PUT   ‚îÇ ‚ôªÔ∏è –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç  ‚îÇ
‚îÇ        ‚îÇ –ü—Ä–∏–º–µ—Ä: "–í–æ—Ç –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ!"   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ DELETE ‚îÇ ‚ùå –£–¥–∞–ª–∏—Ç—å –æ–±—ä–µ–∫—Ç              ‚îÇ
‚îÇ        ‚îÇ –ü—Ä–∏–º–µ—Ä: "–£–¥–∞–ª–∏ —ç—Ç–æ—Ç —ç–ª–µ–º–µ–Ω—Ç!" ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

```

# –£–∫–∞–∑–∞—Ç–µ–ª–∏

–ë—É! –£–∂–µ –±–æ–∏—Ç–µ—Å—å?)

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è

–ê–º–ø–µ—Ä—Å–∞–Ω–¥ &

- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–µ—Å—Ç–æ –≤ –ø–∞–º—è—Ç–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞

–ê—Å—Ç–µ—Ä–∏–∫—Å *

- –ü–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –º–µ—Å—Ç—É –≤ –ø–∞–º—è—Ç–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
- —É–∫–∞–∑–∞—Ç–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ —Ç–∏–ø–∞)

```go
var home *string
```

–ü—Ä–∏–º–µ—Ä

```go
// –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏–º Printf –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
func Printf(format string, a ...any) {
	fmt.Printf(format+"\n", a...)
}

func main() {
	// –∑–Ω–∞–∫ * –º–æ–∂–µ—Ç –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è –∏ –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
	var place *string

	var fruit string = "Apple"

	place = &fruit

	// –ü–æ—Å–º–æ—Ç—Ä–∏–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
	Printf("fruit = %v", fruit)
	Printf("place = %v", place)

	// –ü–æ—Å–º–æ—Ç—Ä–∏–º —Ç–∏–ø—ã
	Printf("type of fruit = %T", fruit)
	Printf("type of place = %T", place)

}
```

```go
// –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏–º Printf –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

func Printf(format string, a ...any) {
	fmt.Printf(format+"\n", a...)
}

func main() {
	// –∑–Ω–∞–∫ * –º–æ–∂–µ—Ç –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è –∏ –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
	var home *string

	country := "Canada"

	home = &country

	// –ü–æ—Å–º–æ—Ç—Ä–∏–º —Ç–µ–ø–µ—Ä—å
	Printf("Type of home is %T\n", home)  // *sting
	Printf("Type of country %T", country) // string

}
```

–ü—Ä–∏–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—è—Å–Ω—è–µ—Ç –≤—Å—ë
–í–µ—Ä–æ—è—Ç–Ω–æ, –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –µ–≥–æ

```go
package main

import (
	"fmt"
	"os"
	"strings"
)

func LexPrint(args ...interface{}) {
	// –ï—Å–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –Ω–µ—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏–º –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
	if len(args) == 0 {
		fmt.Fprint(os.Stdout, "\n")
		return
	}

	// –ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç ‚Äî —Å—Ç—Ä–æ–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞
	format, ok := args[0].(string)
	if !ok {
		panic("LexPrint: first argument must be a format string")
	}

	// –û—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
	a := args[1:]

	s := fmt.Sprintf(format, a...)
	if !strings.HasSuffix(s, "\n") {
		s += "\n"
	}
	fmt.Fprint(os.Stdout, s)
}

func main() {
	// —É–∫–∞–∑–∞–µ–ª—å
	var administrator *string

	name1 := "Christopher J. Scolese"

	// —Ç–µ–ø–µ—Ä—å —É–∫–∞–∑–∞—Ç–µ–ª—å —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ name1
	administrator = &name1
	LexPrint(*administrator)

	name2 := "Charles F. Bolden"

	// —Ç–µ–ø–µ—Ä—å —É–∫–∞–∑–∞—Ç–µ–ª—å —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ name2
	administrator = &name2
	LexPrint(*administrator)

	// –ê —Ç–µ–ø–µ—Ä—å —Ñ–æ–∫—É—Å!
	// –ú–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ, —É–∫–∞–∑–∞—Ç–µ–ª—å
	// —Ç–æ–∂–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
	name2 = "Changing1"
	LexPrint(*administrator) // Changing1

	// –î–∞–ª—å—à–µ –±–æ–ª—å—à–µ
	// –ú–µ–Ω—è –∑–Ω–∞—á–µ–Ω–∏–µ –ü–û —É–∫–∞–∑–∞—Ç–µ–ª—é
	*administrator = "Changing2"
	LexPrint(name2) // Changing2

	// fmt.Println()
	LexPrint()

	// –ï—â—ë –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –≤–µ—â—å
	dog1 := "Buddy"
	pDog1 := &dog1

	// –ú–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞—Ç—å dog2 := dog1
	dog2 := *pDog1

	// –ò–∑–º–µ–Ω–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é
	*pDog1 = "BestFriend"

	LexPrint(dog1) // BestFriend
	LexPrint(dog2)
}
```

## –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É

```go
package main

import (
	"fmt"
)

type box struct {
	weight int
}

func main() {
	b := box{weight: 10}  // –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
	p := &box{weight: 20} // —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É

	fmt.Printf("b = %v \n", b)
	fmt.Printf("p = %v \n", p)

	fmt.Printf("b.weight = %v \n", b.weight) // 10
	fmt.Printf("p.weight = %v \n", p.weight) // 20

	b.weight = 15 // –º–µ–Ω—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É
	p.weight = 25 // –º–µ–Ω—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å

	fmt.Printf("b.weight = %v \n", b.weight) // 15
	fmt.Printf("p.weight = %v \n", p.weight) // 25
}
```

–°–º—ã—Å–ª –≤ —Ç–æ–º, —á—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∞ —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É ‚Äì –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –º–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤.

## –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?

- **–£–∫–∞–∑–∞—Ç–µ–ª—å –ª–µ–≥—á–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å**, —á–µ–º –≤—Å—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–æ–ª—å—à–∞—è).
- **–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å**, –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.
- **–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏**, –µ—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –º–Ω–æ–≥–æ.

–í Go ‚Äî —É–¥–æ–±–Ω–∞—è —Ñ–∏—à–∫–∞:

**–ï—Å–ª–∏ —É —Ç–µ–±—è —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Ç—ã –≤—Å—ë —Ä–∞–≤–Ω–æ –º–æ–∂–µ—à—å –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø–æ–ª—è–º —á–µ—Ä–µ–∑¬†`.`**, –∞ –Ω–µ —á–µ—Ä–µ–∑¬†`*`.

| –ë–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—è | –° —É–∫–∞–∑–∞—Ç–µ–ª–µ–º |
| --- | --- |
| –ö–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤–µ—Å—å –æ–±—ä–µ–∫—Ç | –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–¥—Ä–µ—Å |
| –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –≤–∏–¥–Ω—ã —Å–Ω–∞—Ä—É–∂–∏ | –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è |
| –ë–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏ –∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø–æ –ø–∞–º—è—Ç–∏ |

```go
| –ë–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—è              | –° —É–∫–∞–∑–∞—Ç–µ–ª–µ–º                |
|----------------------------|-----------------------------|
| –ö–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤–µ—Å—å –æ–±—ä–µ–∫—Ç     | –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–¥—Ä–µ—Å     |
| –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è   | –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è       |
| –ë–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏ –∏ –æ–ø–µ—Ä–∞—Ü–∏–π   | –ú–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏ –∏ –æ–ø–µ—Ä–∞—Ü–∏–π    |
| –û—Ä–∏–≥–∏–Ω–∞–ª –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ—Ç—Ä–æ–Ω—É—Ç | –û—Ä–∏–≥–∏–Ω–∞–ª –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è   |
|----------------------------|-----------------------------|
```

### –ò–Ω–æ–≥–¥–∞ –∏–º–µ–µ—Ç –±–æ–ª—å—à–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–µ—Ä–µ–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–ª–∏ —É–∫–∞–∑–∞—Ç–µ–ª—å

```go
package main

import "fmt"

type person struct {
	name string
}

// –∏–∑–º–µ–Ω—è–µ–º –∏–º—è
func changeName(p person) {
	p.name = "Changed!"
}

// –∏–∑–º–µ–Ω—è–µ–º –∏–º—è —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å
func changeNameP(p *person) {
	p.name = "Changed!"
}

func main() {
	p := person{name: "Original"}
	changeName(p)       // –ø–µ—Ä–µ–¥–∞—ë–º –ö–û–ü–ò–Æ
	fmt.Println(p.name) // ‚û°Ô∏è –í—ã–≤–µ–¥–µ—Ç: Original
	fmt.Println("–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞—ë–º —É–∫–∞–∑–∞—Ç–µ–ª—å")
	changeNameP(&p)     // –ø–µ—Ä–µ–¥–∞—ë–º –£–ö–ê–ó–ê–¢–ï–õ–¨
	fmt.Println(p.name) // ‚û°Ô∏è –í—ã–≤–µ–¥–µ—Ç: Changed!
}
```

## –ß—Ç–æ–±—ã –∑–∞–ø–æ–º–Ω–∏—Ç—å:

> –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –º–µ–Ω—è—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Äî –ø–µ—Ä–µ–¥–∞–≤–∞–π —É–∫–∞–∑–∞—Ç–µ–ª—å.
>

> –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º ‚Äî –ø–µ—Ä–µ–¥–∞–≤–∞–π –∫–æ–ø–∏—é.
>

## –£–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Å—Ä–µ–∑—ã

```go
package main

import "fmt"

func main() {
	superpowers := &[3]string{"flight", "invisibility", "superStrength"}

	fmt.Printf("superpowers = %v\n", superpowers)

	fmt.Println(superpowers[0])

	fmt.Println(superpowers[1:])

	// –¢–µ–ø–µ—Ä—å –¥–ª—è —Å—Ä–µ–∑–æ–≤
	//
	heroes := &[]string{"Me", "MyDog"}

	fmt.Printf("heroes = %v\n", heroes)
	fmt.Println((*heroes)[0]) // –¥–ª—è —Å—Ä–µ–∑–æ–≤ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–∏—Å–∞—Ç—å —Ç–∞–∫
	// fmt.Println(heroes[0]) // invalid operation: cannot index heroes (variable of type *[]string)

}
```

## –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ä–µ—Å–∏–≤–µ—Ä –≤ –º–µ—Ç–æ–¥–µ

```go
package main

import "fmt"

type person struct {
	name string
	age  int
}

// –ú–µ—Ç–æ–¥ —Å –ö–û–ü–ò–ï–ô (–±–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—è)
func (p person) birthdayCopy() {
	p.age++
}

// –ú–µ—Ç–æ–¥ —Å –£–ö–ê–ó–ê–¢–ï–õ–ï–ú (–æ—Ä–∏–≥–∏–Ω–∞–ª)
func (p *person) birthdayPointer() {
	p.age++
}

func main() {
	alice := person{name: "Alice", age: 20}

	// –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ: {name:Alice age:20}
	fmt.Printf("–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ: %+v\n", alice)

	// –ú–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ–ø–∏–µ–π
	alice.birthdayCopy()
	// –ü–æ—Å–ª–µ birthdayCopy (–∫–æ–ø–∏—è): {name:Alice age:20}
	fmt.Printf("–ü–æ—Å–ª–µ birthdayCopy (–∫–æ–ø–∏—è): %+v\n", alice)

	// –ú–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —É–∫–∞–∑–∞—Ç–µ–ª–µ–º
	alice.birthdayPointer()

	// –ü–æ—Å–ª–µ birthdayPointer (—É–∫–∞–∑–∞—Ç–µ–ª—å): {name:Alice age:21}
	fmt.Printf("–ü–æ—Å–ª–µ birthdayPointer (—É–∫–∞–∑–∞—Ç–µ–ª—å): %+v\n", alice)
}
```

| –ú–µ—Ç–æ–¥ | –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç | –û—Ä–∏–≥–∏–Ω–∞–ª –º–µ–Ω—è–µ—Ç—Å—è? |
| --- | --- | --- |
| `func (p person)` | –†–∞–±–æ—Ç–∞–µ—Ç —Å –∫–æ–ø–∏–µ–π | ‚ùå –ù–µ—Ç |
| `func (p *person)` | –†–∞–±–æ—Ç–∞–µ—Ç —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º | ‚úÖ –î–∞ |

## –†–∞–∑–Ω–∏—Ü–∞ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π —Å —É–∫–∞–∑–∞—Ç–µ–ª–µ–º –∏ –±–µ–∑

–ï—Å–ª–∏ –º–µ—Ç–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî –µ–≥–æ –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –∫–∞–∫ —É –æ–±—ã—á–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, —Ç–∞–∫ –∏ —É —É–∫–∞–∑–∞—Ç–µ–ª—è. –ê –≤–æ—Ç –µ—Å–ª–∏ –º–µ—Ç–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–ª—è —É–∫–∞–∑–∞—Ç–µ–ª—è, —Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å.

```go
package main

import (
	"fmt"
	"strings"
)

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å talker —Ç—Ä–µ–±—É–µ—Ç –æ–¥–∏–Ω –º–µ—Ç–æ–¥: talk() string
type talker interface {
	talk() string
}

// –§—É–Ω–∫—Ü–∏—è shout –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±–æ–π —Ç–∏–ø, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å talker,
// –≤—ã–∑—ã–≤–∞–µ—Ç –µ–≥–æ –º–µ—Ç–æ–¥ talk() –∏ –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ.
func shout(t talker) {
	louder := strings.ToUpper(t.talk())
	fmt.Println(louder)
}

// ----- –°–õ–£–ß–ê–ô 1: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –º–µ—Ç–æ–¥–æ–º –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é -----

// –¢–∏–ø messageValue ‚Äî –ø—É—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (0 –±–∞–π—Ç).
type messageValue struct{}

// –ú–µ—Ç–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏—è (–±–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—è):
// –∑–Ω–∞—á–∏—Ç, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –¥–ª—è messageValue{}, –∏ –¥–ª—è &messageValue{}.
func (m messageValue) talk() string {
	return "value interface speaking"
}

// ----- –°–õ–£–ß–ê–ô 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –º–µ—Ç–æ–¥–æ–º –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é -----

// –¢–∏–ø messagePointer ‚Äî —Å–Ω–æ–≤–∞ –ø—É—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞.
type messagePointer struct{}

// –ú–µ—Ç–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è *messagePointer (—É–∫–∞–∑–∞—Ç–µ–ª—è).
// –ó–Ω–∞—á–∏—Ç, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ &messagePointer{}.
func (m *messagePointer) talk() string {
	return "pointer interface speaking"
}

func main() {
	// ----- –ü—Ä–∏–º–µ—Ä —Å –º–µ—Ç–æ–¥–æ–º –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é -----
	fmt.Println("== –ú–µ—Ç–æ–¥ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é ==")
	shout(messageValue{})   // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
	shout(&messageValue{})  // ‚úÖ –¢–æ–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî Go —Å–∞–º —Ä–∞–∑—ã–º–µ–Ω—É–µ—Ç

	// ----- –ü—Ä–∏–º–µ—Ä —Å –º–µ—Ç–æ–¥–æ–º –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é -----
	fmt.Println("\n== –ú–µ—Ç–æ–¥ –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é ==")
	// shout(messagePointer{})  // ‚ùå –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç: –Ω–µ—Ç –º–µ—Ç–æ–¥–∞ talk —É messagePointer
	shout(&messagePointer{})   // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç: –º–µ—Ç–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —É *messagePointer
}
```

–ü–æ–ø—ã—Ç–∫–∞ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ nil —É–∫–∞–∑–∞—Ç–µ–ª—é –≤—ã–∑—ã–≤–∞–µ—Ç –ø–∞–Ω–∏–∫—É.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã –º–æ–∂–µ–º –µ—ë –∏–∑–±–µ–∂–∞—Ç—å

```go
var nowhere *int
if nowhere != nil {
		fmt.Println(*nowhere)
}
```

# nil

–ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ª—é–±–æ–≥–æ —É–∫–∞–∑–∞—Ç–µ–ª—è —ç—Ç–æ nil

–ò–Ω–æ–≥–¥–∞ –ø—É—Å—Ç–æ–π —Å—Ä–µ–∑, map –±—ã–≤–∞—é—Ç –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã —Å nil

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –æ–∂–∏–¥–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–ª–∏ map, –∞ –Ω–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç, –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞—Ç—å nil

```go
package main

import "fmt"

// –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ range, len –∏ append –Ω–µ –≤—ã–¥–∞–¥—É—Ç –æ—à–∏–±–∫—É,
// –µ—Å–ª–∏ –≤–º–µ—Å—Ç–æ –ø—É—Å—Ç–æ–≥–æ —Å–ø–∏–∫–∞ –ø–µ—Ä–µ–¥–∞—Ç—å nil

func main() {
	var soup []string
	fmt.Println(soup == nil) // true
	for _, ingredient := range soup {
		fmt.Println(ingredient)
	}

	fmt.Println(len(soup)) // 0
	soup = append(soup, "onion", "carrot", "celery")
	fmt.Println(soup) // [onion carrot celery]
}

```

# –¢–µ—Å—Ç—ã

–ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã?

–ó–∞–ø—É—Ç–∏—Ç—å —Ñ–∞–π–ª —Å —Ç–µ—Å—Ç–∞–º–∏ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

```go
go test
```

–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ

```go
go test ./...
```

–ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞?

–°–Ω–∞—á–∞–ª–∞ –≥–µ–Ω–µ—Ä–∏—É—Ä–µ–º –æ—Ç—á—ë—Ç

```go
go test -coverprofile=coverage.out
```

–ü–æ—Ç–æ–º –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å html –æ—Ç—á—ë—Ç

```go
go tool cover -html=coverage.out -o coverage.html
```

–í –±—Ä–∞—É–∑–µ—Ä–µ —Ç—ã —É–≤–∏–¥–∏—à—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π:

- **–ó–µ–ª—ë–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏**¬†‚Äî –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏.
- **–ö—Ä–∞—Å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏**¬†‚Äî –Ω–µ –ø–æ–∫—Ä—ã—Ç—ã.
- **–°–µ—Ä—ã–µ —Å—Ç—Ä–æ–∫–∏**¬†‚Äî –Ω–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –æ–±—ä—è–≤–ª–µ–Ω–∏—è).

# –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω–æ–≥–æ —Ç–∏–ø–∞

–í Go¬†**–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**¬†‚Äî —ç—Ç–æ¬†**–Ω–∞–±–æ—Ä –º–µ—Ç–æ–¥–æ–≤**, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–∏–ø, —á—Ç–æ–±—ã "–ø–æ–¥—Ö–æ–¥–∏—Ç—å –ø–æ–¥ —ç—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å". –ê –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è¬†**–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω–æ–≥–æ —Ç–∏–ø–∞**¬†–º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å¬†**–ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**, –≥–ª–∞–≤–Ω–æ–µ ‚Äî —á—Ç–æ–±—ã –æ–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞–ª–æ –Ω—É–∂–Ω—ã–µ –º–µ—Ç–æ–¥—ã (–∞ —É¬†interface{}¬†‚Äî –≤–æ–æ–±—â–µ –Ω–∏–∫–∞–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è).

```go
var x interface{}
x = 42        // –º–æ–∂–Ω–æ –ø—Ä–∏—Å–≤–æ–∏—Ç—å int
x = "hello"   // –ø–æ—Ç–æ–º –ø—Ä–∏—Å–≤–æ–∏—Ç—å string
x = true      // –∏ –¥–∞–∂–µ bool

```

–ü—Ä–∏–∫–æ–ª—å–Ω–æ) –ó–∞ —Å—á—ë—Ç interface{} –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

## –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω–æ–≥–æ —Ç–∏–ø–∞?

–ö–æ–≥–¥–∞ —Ç—ã –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—à—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, Go¬†**—É–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –¥–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–∞**:

1. **–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**
2. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –µ–≥–æ —Ç–∏–ø–µ (—Ç–∏–ø –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä)**

üì¶ –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è¬†**–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –æ–Ω–∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ "—Å–æ–¥–µ—Ä–∂–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ", –∞ —Ö—Ä–∞–Ω–∏—Ç –∏ —Ç–æ,¬†**—á—Ç–æ —ç—Ç–æ –∑–∞ —Ç–∏–ø**, –∏¬†**—á—Ç–æ —ç—Ç–æ –∑–∞ –∑–Ω–∞—á–µ–Ω–∏–µ**.

```go
var x interface{} = "Golang"

s, ok := x.(string)
if ok {
	fmt.Println("–≠—Ç–æ —Å—Ç—Ä–æ–∫–∞:", s)
} else {
	fmt.Println("–≠—Ç–æ –Ω–µ —Å—Ç—Ä–æ–∫–∞")
}

```

# –ü—Ä–∏–∫–æ–ª—å–Ω—ã–µ —Ñ–∏—à–∫–∏

## –í—ã–≤–æ–¥ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –∏ –∑–Ω–∞—á–µ–Ω–∏—è

```go
fmt.Printf("%#v", v")
```

–ü–æ–∫–∞–∂–µ—Ç —Å—Ä–∞–∑—É –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Ç–∏–ø –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

## –í—ã–≤–æ–¥ –ø–æ–ª–µ–π –ø—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è —Å—Ç—É—Ä–∫—É—Ä –∏ map

```go
fmt.Printf("%+v\n", *config)
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–û–±—ë—Ä—Ç–∫–∞, —á—Ç–æ–±—ã –ø—Ä–æ—â–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏

```go
type safeWriter struct {
	w   io.Writer // –ø–æ—Ç–æ–∫, –∫—É–¥–∞ –ø–∏—à–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∞–π–ª)
	err error     // –∑–¥–µ—Å—å —Ö—Ä–∞–Ω–∏–º –ø–µ—Ä–≤—É—é –æ—à–∏–±–∫—É, –µ—Å–ª–∏ –æ–Ω–∞ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç
}

// –ú–µ—Ç–æ–¥ writeln –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É s, –µ—Å–ª–∏ —Ä–∞–Ω—å—à–µ –Ω–µ –±—ã–ª–æ –æ—à–∏–±–∫–∏
func (sw *safeWriter) writeln(s string) {
	// –ï—Å–ª–∏ —É–∂–µ –±—ã–ª–∞ –æ—à–∏–±–∫–∞ —Ä–∞–Ω–µ–µ, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
	if sw.err != nil {
		return
	}

	// –ü–∏—à–µ–º —Å—Ç—Ä–æ–∫—É. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞, –æ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ sw.err
	_, sw.err = fmt.Fprintln(sw.w, s)
}
```

```go
package main

import (
	"bytes"
	"fmt"
	"io"
)

// safeWriter ‚Äî —ç—Ç–æ –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ io.Writer, –∫–æ—Ç–æ—Ä–∞—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–µ—Ä–≤—É—é –æ—à–∏–±–∫—É
type safeWriter struct {
	w   io.Writer // –ö—É–¥–∞ –ø–∏—Å–∞—Ç—å
	err error     // –°—é–¥–∞ –∑–∞–ø–∏—à–µ—Ç—Å—è –ø–µ—Ä–≤–∞—è –æ—à–∏–±–∫–∞, –µ—Å–ª–∏ –æ–Ω–∞ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç
}

// writeln ‚Äî –º–µ—Ç–æ–¥ –∑–∞–ø–∏—Å–∏ —Å—Ç—Ä–æ–∫–∏. –ï—Å–ª–∏ —É–∂–µ –±—ã–ª–∞ –æ—à–∏–±–∫–∞, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç.
func (sw *safeWriter) writeln(s string) {
	if sw.err != nil {
		return // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —É–∂–µ –±—ã–ª–∞, –≤—ã—Ö–æ–¥–∏–º
	}
	_, sw.err = fmt.Fprintln(sw.w, s) // –ü–∏—à–µ–º —Å—Ç—Ä–æ–∫—É, –∑–∞–ø–æ–º–∏–Ω–∞–µ–º –æ—à–∏–±–∫—É
}

func main() {
	var buf bytes.Buffer // –≠—Ç–æ "—Ñ–µ–π–∫–æ–≤—ã–π —Ñ–∞–π–ª", –ø—Ä–æ—Å—Ç–æ –±—É—Ñ–µ—Ä –≤ –ø–∞–º—è—Ç–∏

	sw := safeWriter{w: &buf}

	sw.writeln("–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞")
	sw.writeln("–í—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞")
	sw.writeln("–¢—Ä–µ—Ç—å—è —Å—Ç—Ä–æ–∫–∞")

	// –ü—Ä–æ–≤–µ—Ä–∏–º, –±—ã–ª–∞ –ª–∏ –æ—à–∏–±–∫–∞
	if sw.err != nil {
		fmt.Println("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏:", sw.err)
	} else {
		fmt.Println("–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø–∏—Å–∏:")
		fmt.Println(buf.String()) // –ü–µ—á–∞—Ç–∞–µ–º, —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å –≤ –±—É—Ñ–µ—Ä–µ
	}
}
```

## type assertion

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ¬†**type assertion**¬†–≤ Go –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ –æ—à–∏–±–∫–∏ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Ç–∏–ø–∞ error. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ —Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—à—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–∏–ø –æ—à–∏–±–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ä–µ–∑ –æ—à–∏–±–æ–∫) —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å¬†error, –Ω–æ —Ö–æ—á–µ—à—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –∫–∞–∂–¥—É—é –æ—à–∏–±–∫—É –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏.

```go
package main

import (
	"errors"
	"fmt"
)

// –û–±—ä—è–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–∏–ø –æ—à–∏–±–∫–∏ ‚Äî —Å—Ä–µ–∑ –∏–∑ –æ—à–∏–±–æ–∫
type MyError []error

// –†–µ–∞–ª–∏–∑—É–µ–º –º–µ—Ç–æ–¥ Error() –¥–ª—è MyError, —á—Ç–æ–±—ã –æ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É error
func (me MyError) Error() string {
	return fmt.Sprintf("%d errors occurred", len(me))
}

// –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É —Ç–∏–ø–∞ MyError, –Ω–æ –∫–∞–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å error
func doSomething() error {
	return MyError{
		errors.New("first problem"),
		errors.New("second problem"),
	}
}

func main() {
	err := doSomething() // err –∏–º–µ–µ—Ç —Ç–∏–ø error, –Ω–æ –≤–Ω—É—Ç—Ä–∏ –ª–µ–∂–∏—Ç MyError

	// –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–∏–≤–µ—Å—Ç–∏ err –æ–±—Ä–∞—Ç–Ω–æ –∫ MyError —Å –ø–æ–º–æ—â—å—é type assertion
	if errs, ok := err.(MyError); ok {
		fmt.Printf("–ü—Ä–æ–∏–∑–æ—à–ª–æ %d –æ—à–∏–±–æ–∫:\n", len(errs))
		for _, e := range errs {
			fmt.Println("-", e)
		}
	} else {
		// –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–∏–≤–µ—Å—Ç–∏ —Ç–∏–ø ‚Äî –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏–º –æ—à–∏–±–∫—É
		fmt.Println("–û–±—ã—á–Ω–∞—è –æ—à–∏–±–∫–∞:", err)
	}
}

// –ü—Ä–æ–∏–∑–æ—à–ª–æ 2 –æ—à–∏–±–æ–∫:
// - first problem
// - second problem
```

## –¶–∏–∫–ª range

(–Ω–∞—á–∏–Ω–∞—è —Å go 1.22)

–í–º–µ—Å—Ç–æ

```go
for i := 0; i < n; i++ {
    // —Ç–µ–ª–æ —Ü–∏–∫–ª–∞
}

```

–ú–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å

```go
for i := range n {
    // —Ç–µ–ª–æ —Ü–∏–∫–ª–∞
}

```

–ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è i –Ω–µ –Ω—É–∂–Ω–∞, —Ç–æ

```go
for _ = range n {
    // –ø–æ–≤—Ç–æ—Ä–∏—Ç—å n —Ä–∞–∑ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞
}

```

## –ú–µ—Ç–∫–∏

```go
func main() {
    samples := []string{"hello", "apple_œÄ!"}
outer:
    for _, sample := range samples {
        for i, r := range sample {
            fmt.Println(i, r, string(r))
            if r == 'l' {
                continue outer
            }
        }
    fmt.Println()
    }
}
```

## –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏

–î–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```go
type MyFuncOpts struct {
	FirstName string
	LastName  string
	Age       int
}

func MyFunc(opts MyFuncOpts) error {
	// –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –¥–µ–π—Å—Ç–≤–∏–π
}

func main() {
	MyFunc(MyFuncOpts{
		LastName: "Patel",
		Age:      50,
	})
	MyFunc(MyFuncOpts{
		FirstName: "Joe",
		LastName:  "Smith",
	})
}

```

## –ü–µ—Ä–µ–º–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏

```go
func variadicSum(message string, numbers ...int) int {
	fmt.Println(message)
	var sum int = 0
	for _, v := range numbers {
		sum += v
	}
	return sum
}

func main() {
	fmt.Println(variadicSum("Hello world!", 1, 2, 3))
}

```

## –ó–∞–º—ã–∫–∞–Ω–∏—è –≤ defer

–í‚ÄØGo‚ÄØ–æ–ø–µ—Ä–∞—Ç–æ—Ä defer –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–æ –ø–æ–∑–∂–µ, –Ω–æ –∞—Ä–≥—É–º–µ–Ω—Ç—ã —ç—Ç–æ–≥–æ –≤—ã–∑–æ–≤–∞ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è —Å—Ä–∞–∑—É, –≤ –º–æ–º–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ defer.

```jsx
func Example() {
	i := 0
	defer fmt.Println(i) // 0
	i = 5
	fmt.Println("Here we go")
}
```

–ü—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏  –±—É–¥–µ—Ç –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–æ 0, –ø–æ—Ç–æ–º—É —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ i –±—ã–ª–æ –∑–∞—Ö–≤–∞—á–µ–Ω–æ –≤ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞.

–ù–æ

–ï—Å–ª–∏ –∂–µ –≤ –æ—Ç–ª–æ–∂–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∑–∞–º—ã–∫–∞–Ω–∏–µ, –∞ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏–∑ –≤–Ω–µ—à–Ω–µ–π –æ–±–ª–∞—Å—Ç–∏, —Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–º—ã–∫–∞–Ω–∏—è, —Ç.–µ. –ø–æ—Å–ª–µ return

```jsx
func ExampleWithClosure() {
	i := 0
	defer func() {
		fmt.Println(i) // 5
	}()
	i = 5
	fmt.Println("Here we go")
}
```

–í—ã–≤–æ–¥ –±—É–¥–µ—Ç 5, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ func() –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è i –±–µ—Ä—ë—Ç—Å—è –∏–∑ –≤–Ω–µ—à–Ω–µ–π –æ–±–ª–∞—Å—Ç–∏ –≤ –º–æ–º–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞, –∞ –Ω–µ –≤ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è defer.

```jsx
func main() {
	Example()     // 0
	fmt.Println() // 5
	ExampleWithClosure()
}

```

defer –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –∏–º—è –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–¥–∞–Ω–æ –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ —Ñ—É–Ω–∫—Ü–∏–∏

```go
package main

import "fmt"

func compute() (result int) { // –∏–º—è –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–æ —è–≤–Ω–æ
	defer func() {
		if result == 0 {
			result = -1 // ¬´–æ—à–∏–±–æ—á–Ω—ã–π¬ª –∫–æ–¥
		}
	}()

	val, ok := getValue()
	if !ok { // –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –ø–æ–ª—É—á–µ–Ω–æ ‚Äì –æ—Å—Ç–∞–≤–ª—è–µ–º result = 0
		return
	}

	result = val
	return
}

// –ò–º–∏—Ç–∏—Ä—É–µ–º –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
func getValue() (int, bool) {
	// return 42, true // <-- —É—Å–ø–µ—à–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
	return 0, false // <-- –≤–∞—Ä–∏–∞–Ω—Ç —Å –æ—à–∏–±–∫–æ–π
}

func main() {
	fmt.Println("–£—Å–ø–µ—à–Ω—ã–π –≤—ã–∑–æ–≤:", compute())
}

```

## –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —É–∫–∞–∑–∞—Ç–µ–ª—å

```go
func update(g **int) {
    x := 10
    *g = &x
}

func main() {
    var f *int
    update(&f)
    fmt.Println(*f) // 10
}

```

–ú—ã —Å–º–æ–≥–ª–∏ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω–µ—è–≤–Ω–æ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞) –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —Å nil –Ω–∞ *int

–ï—Å–ª–∏ –±—ã –º—ã —Å–¥–µ–ª–∞–ª–∏ –≤–æ—Ç —Ç–∞–∫, –±—ã–ª–∞ –±—ã –ø–∞–Ω–∏–∫–∞

```go
func failingUpdate2(g *int) {
	*g = 10 // panic
}

func main() {
	var f *int = nil

	failingUpdate2(f)
	fmt.Println(f)
}
```

–í –ø–∞–º—è—Ç–∏

```go
main:
   f ‚îÄ‚îÄ‚îÄ‚ñ∫ nil

–≤—ã–∑–æ–≤ failingUpdate2(f):
   g ‚îÄ‚îÄ‚îÄ‚ñ∫ nil (–∫–æ–ø–∏—è f)

   *g = 10
     ‚îÇ
     ‚îî‚îÄ‚îÄ –ø–æ–ø—ã—Ç–∫–∞ –∑–∞–ø–∏—Å–∞—Ç—å –ø–æ –∞–¥—Ä–µ—Å—É nil ‚áí PANIC

```

–ï—Å—Ç—å –≤–æ—Ç —Ç–∞–∫–æ–π –∫–æ–¥

```go
func failingUpdate(g *int) {
    x := 10
    g = &x
}

func main() {
    var f *int = nil
    failingUpdate(f)
    fmt.Println(f) // nil
}

```

```go
main:
   f ‚îÄ‚îÄ‚îÄ‚ñ∫ nil

–≤—ã–∑–æ–≤ failingUpdate(f):
   g ‚îÄ‚îÄ‚îÄ‚ñ∫ nil (–∫–æ–ø–∏—è f)
   x = 10 (–ª–µ–∂–∏—Ç –≤ —Å—Ç–µ–∫–µ —Ñ—É–Ω–∫—Ü–∏–∏)

   g = &x   // —Ç–µ–ø–µ—Ä—å g —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ x
   f –æ—Å—Ç–∞—ë—Ç—Å—è nil, –ø–æ—Ç–æ–º—É —á—Ç–æ g ‚Äî –∫–æ–ø–∏—è!
```

## –ö—É–¥—Ä—è–≤—ã–µ —Å–∫–æ–±–∫–∏ –±–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞

–í Go –º–æ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ –±–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞

```go
// –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
{
    x := 42
    fmt.Println(x)
}
// fmt.Println(x) // –û—à–∏–±–∫–∞: x –Ω–µ –≤–∏–¥–Ω–æ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –±–ª–æ–∫–∞

```

```go
// defer –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏
{
    f, _ := os.Open("file.txt")
    defer f.Close()

    // —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–º
}
// —Ç—É—Ç —Ñ–∞–π–ª —É–∂–µ –∑–∞–∫—Ä—ã—Ç

```

```go
// –ó–¥–µ—Å—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–ª–µ–∑–Ω–æ!

package main

import (
    "fmt"
    "os"
)

func main() {
    files := []string{"a.txt", "b.txt", "c.txt"}

    for _, name := range files {
        { // –Ω–æ–≤—ã–π –±–ª–æ–∫
            f, err := os.Create(name)
            if err != nil {
                panic(err)
            }
            defer f.Close() // —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Ü–µ –ë–õ–û–ö–ê, –Ω–µ –≤—Å–µ–π —Ñ—É–Ω–∫—Ü–∏–∏
            fmt.Println("Created:", name)
        } // <-- –∑–¥–µ—Å—å —Ñ–∞–π–ª –∑–∞–∫—Ä–æ–µ—Ç—Å—è
    }
    fmt.Println("Done")
}

```

```go
// –ü—Ä–æ—Å—Ç–æ –¥–ª—è –≥—Ä—É–ø–ø–∏–∫—Ä–æ–≤–∫–∏ –ª–æ–≥–∏–∫–∏ –∏ –ø–æ–≤—ã—à–µ–Ω–∏—è
// —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
{
    fmt.Println("Start")
    fmt.Println("End")
}

```

## iota

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∏—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç

```go
const (
    A = iota // 0
    B        // 1
    C        // 2
)
```

```go
const (
    A = iota + 1 // 1
    B             // 2
    C             // 3
)

```

```go
const (
    A = iota + 1 // 1
		_            // –ø—Ä–æ–ø—É—Å–∫ –∑–Ω–∞—á–µ–Ω–∏—è
    B             // 3
    C             // 4
)

```

–ü—Ä–∏–º–µ—Ä —Å –±–∏—Ç–æ–≤—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏ (–∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–ª–∞–≥–æ–≤ (–≤–∫–ª—é—á–µ–Ω–æ/–≤—ã–∫–ª—é—á–µ–Ω–æ) –≤ –æ–¥–Ω–æ–º —á–∏—Å–ª–µ)

```go
package main

import "fmt"

const (
    Read = 1 << iota  // 1 << 0 = 1
    Write             // 1 << 1 = 2
    Execute           // 1 << 2 = 4
)

func main() {
    perms := Read | Execute       // –∫–æ–º–±–∏–Ω–∏—Ä—É–µ–º —Ñ–ª–∞–≥–∏
    fmt.Println(perms)            // 5
    fmt.Println(perms&Read != 0)  // true
    fmt.Println(perms&Write != 0) // false
}

// & –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±–∏—Ç
```

<< –ø–æ–±–∏—Ç–æ–≤—ã–π —Å–¥–≤–∏–≥ –≤–ª–µ–≤–æ

| –í—ã—Ä–∞–∂–µ–Ω–∏–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –¥–µ—Å—è—Ç–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ | –í –¥–≤–æ–∏—á–Ω–æ–π |
| --- | --- | --- |
| `1 << 0` | `1` | `0001` |
| `1 << 1` | `2` | `0010` |
| `1 << 2` | `4` | `0100` |

```go
// –¢–æ –µ—Å—Ç—å
Read = 1
Write = 2
Execute = 4

```

–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å —Ç—Ä–∏ —Ñ–ª–∞–≥–∞, –∫–∞–∂–¥—ã–π –≤ —Å–≤–æ—ë–º –±–∏—Ç–µ.
–ò—Ö –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–±–∏—Ç–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏:

```go
perms := Read | Execute
```

–ü—Ä–∏–º–µ—Ä 2

–î–Ω–∏ –Ω–µ–¥–µ–ª–∏

```go
package main

import "fmt"

type Weekday int // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–∞, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞ int

const (
    Sunday Weekday = iota
    Monday
    Tuesday
    Wednesday
    Thursday
    Friday
    Saturday
)

// –°–æ–∑–¥–∞—ë—Ç –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫, –≥–¥–µ –∏–Ω–¥–µ–∫—Å ‚Äì –∑–Ω–∞—á–µ–Ω–∏–µ iota
func (w Weekday) String() string {
    return [...]string{
        "Sunday", "Monday", "Tuesday", "Wednesday",
        "Thursday", "Friday", "Saturday",
    }[w]
}

func main() {
    fmt.Println(Monday)   // Monday
    fmt.Println(Friday)   // Friday
    fmt.Println(Weekday(6)) // Saturday
}

```

–ü—Ä–∏–º–µ—Ä 3

–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```go
type Direction int

const (
    North Direction = iota
    East
    South
    West
)

func (d Direction) String() string {
    return [...]string{"North", "East", "South", "West"}[d]
}

// [...]string{"North", "East", "South", "West"}[d]
// –ú–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫, –±–µ—Ä—ë–º —ç–ª–µ–º–µ–Ω—Ç –ø–æ –∏–Ω–¥–µ–∫—Å—É d
```

–ü–æ—è—Å–Ω–∏–µ–Ω–∏—è

```go
func (w Weekday) String() string {
    return [...]string{
        "Sunday", "Monday", "Tuesday", "Wednesday",
        "Thursday", "Friday", "Saturday",
    }[w]
}

//"–ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–≤–µ—Å—Ç–∏ Weekday —á–µ—Ä–µ–∑ fmt.Println() –∏–ª–∏ %v,
// –∏—Å–ø–æ–ª—å–∑—É–π –≤–æ—Ç —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –µ–≥–æ –≤ –≤–∏–¥–µ —Ç–µ–∫—Å—Ç–∞."
```

–£–º–µ–Ω—å—à–∞—é—â–∏–µ—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```go
const (
    A = 10 - iota // 10, 9, 8, 7
    B
    C
    D
)

```

```go
const (
    X = -iota // 0, -1, -2, -3
    Y
    Z
)

```

## –ó–∞–¥–∞—ë–º —Å–≤–æ–π —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ –≤ Print –∏ –∞–Ω–∞–ª–æ–≥–∞—Ö

–≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∑–∞ —Å—á—ë—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–∞ String() (—Ä–µ–∞–ª–∏–∑—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

```go
type Stringer interface {
    String() string
}
```

–¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥

```go
package main

import "fmt"

type Status int

const (
	OK Status = iota
	Warning
	Error
)

func (s Status) String() string {
	switch s {
	case OK:
		return "\033[32mOK\033[0m" // –∑–µ–ª—ë–Ω—ã–π
	case Warning:
		return "\033[33mWARNING\033[0m" // –∂—ë–ª—Ç—ã–π
	case Error:
		return "\033[31mERROR\033[0m" // –∫—Ä–∞—Å–Ω—ã–π
	default:
		return "UNKNOWN"
	}
}

func main() {
	fmt.Println(OK, Warning, Error)
}

```

–ü—Ä–µ—Å–æ–Ω–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```go
package main

import (
	"encoding/json"
	"fmt"
)

type User struct {
	Name  string
	Age   int
	Admin bool
}

func (u User) String() string {
	data, _ := json.MarshalIndent(u, "", "  ")
	return string(data)
}

func main() {
	user := User{"Alice", 30, true}
	fmt.Println(user)
}

// –í—ã–≤–æ–¥
//{
//  "Name": "Alice",
//  "Age": 30,
//  "Admin": true
//}
// –í–º–µ—Å—Ç–æ
// {Alice 30 true}

```

```go
package main

import "fmt"

type Point struct {
	X, Y int
}

func (p Point) String() string {
	return fmt.Sprintf("Point(x=%d, y=%d)", p.X, p.Y)
}

func main() {
	p := Point{10, 20}
	fmt.Println(p)
}

// –ó–∞–¥–∞–ª–∏ –≤—ã–≤–æ–¥
// Point(x=10, y=20)
```


–ï—Å–ª–∏ —Ä–µ–∞–ª–∏p–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ GoString(), —ç—Ç–æ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤—ã–≤–æ–¥–µ –≤ %#v


```go

type Point struct{ X, Y int }
func (p Point) String() string   { return fmt.Sprintf("(%d,%d)", p.X, p.Y) }
func (p Point) GoString() string { return fmt.Sprintf("Point{X:%d, Y:%d}", p.X, p.Y) }

p := Point{2,3}
fmt.Println(p)           // (2,3)
fmt.Printf("%#v\n", p)   // Point{X:2, Y:3}
```

## Alias —Ç–∏–ø–∞

–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–∏–ø –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∏–ø–∞, –∞ –∏–º–µ–Ω–Ω–æ alias –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–∏–ø–∞

–î–∞–∂–µ –µ—Å–ª–∏ —É —Ç–∏–ø–æ–≤ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –±–∞–∑–æ–≤—ã–π —Ç–∏–ø, –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –±–µ–∑ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–µ—â–µ–Ω–æ:

```go

type MyInt int

var a int
var b MyInt

// a = b      // –æ—à–∏–±–∫–∞
a = int(b)    // –æ–∫: —è–≤–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

type AliasInt = int
var c AliasInt
a = c         // –æ–∫: —ç—Ç–æ —Ç–æ—Ç –∂–µ —Ç–∏–ø int (type alias)
```

## –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∫–æ–¥–∞

```
// Utility
func TrackTime(pre time.Time) time.Duration {
  elapsed := time.Since(pre)
  fmt.Println("elapsed:", elapsed)

  return elapsed
}

func TestTrackTime(t *testing.T) {
 defer TrackTime(time.Now()) // <--- THIS

 time.Sleep(500 * time.Millisecond)
}

// elapsed: 501.11125ms
```

# –ë–µ–∑ –ø–∞–Ω–∏–∫–∏! (–Ω–µ—Ç)

–ö–∞–∫ –≤—ã–∑—ã–≤–∞—Ç—å –ø–∞–Ω–∏–∫—É? (–ó–≤—É—á–∏—Ç –∑–∞–±–∞–≤–Ω–æ)

```go
panic("Weeeee") // –°–µ–µ–º –ø–∞–Ω–∏–∫—É
```

## –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–∞–Ω–∏–∫–∞?

–ü–∞–Ω–∏–∫–∞ ‚Äî —ç—Ç–æ¬†**–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –æ—à–∏–±–∫–∏**, –∫–æ—Ç–æ—Ä—ã–π:

- –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –æ–±—ã—á–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã;
- –Ω–∞—á–∏–Ω–∞–µ—Ç "—Ä–∞—Å–∫—Ä—É—Ç–∫—É —Å—Ç–µ–∫–∞" ‚Äî –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ;
- –º–æ–∂–µ—Ç –±—ã—Ç—å¬†**–ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–∞**¬†—Å –ø–æ–º–æ—â—å—é¬†`recover()`¬†(–æ–±—ã—á–Ω–æ –≤¬†`defer`), –µ—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å "—Å–ø–∞—Å—Ç–∏" –ø—Ä–æ–≥—Ä–∞–º–º—É –æ—Ç –∫—Ä–∞—Ö–∞.

## –ö–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–∞–Ω–∏–∫–∞?

### Go –≤—ã–∑—ã–≤–∞–µ—Ç –ø–∞–Ω–∏–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏:

- –¥–µ–ª–µ–Ω–∏–∏ –Ω–∞ –Ω–æ–ª—å (`x / 0`);
- –≤—ã—Ö–æ–¥–µ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã —Å—Ä–µ–∑–∞ (`slice[100]`, –µ—Å–ª–∏ –¥–ª–∏–Ω–∞ 10);
- —Ä–∞–∑—ã–º–µ–Ω–æ–≤–∞–Ω–∏–∏¬†`nil`—É–∫–∞–∑–∞—Ç–µ–ª—è;
- `runtime.Goexit()`¬†(–∏–Ω–æ–≥–¥–∞);
- –ø–æ–ø—ã—Ç–∫–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º—å—é—Ç–µ–∫—Å (`sync.Mutex.Unlock()`¬†–±–µ–∑ Lock);
- —è–≤–Ω–æ–º –≤—ã–∑–æ–≤–µ¬†`panic("—á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫")`.

–õ—É—á—â–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ err ‚â† nill, –ø—Ä–∏ —ç—Ç–æ–º painc –ª—É—á—à–µ, —á–µ–º os.Exit(), –ø–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–∏ –ø–∞–Ω–∏–∫–µ –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è deffer(), –∞ –ø—Ä–∏ os.Exit() ‚Äì –Ω–µ—Ç

```go
package main

import (
	"fmt"
)

func testingSomething() {
	defer fmt.Println("GO")

	panic(0)
}

func main() {
	fmt.Println("Here we")

	testingSomething()
}

// Here we
// GO
// panic: 0
```

```go
// –ë–µ–∑ –ø–∞–Ω–∏–∫–∏

package main

import (
	"fmt"
	"os"
)

func testingSomething() {
	defer fmt.Println("GO") // –ù–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ

	os.Exit(0)
}

func main() {
	fmt.Println("Here we")

	testingSomething()
}

// Here we
```

## recover

recover –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞—Ç—å –ø–∞–Ω–∏–∫—É –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã

```go
package main

import "fmt"

func main() {
	defer func() {
		if e := recover(); e != nil {
			// –≠—Ç–æ—Ç –∫–æ–¥ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è, –µ—Å–ª–∏ –≤ main —Å–ª—É—á–∏—Ç—Å—è panic
			fmt.Println("Recover from panic:", e)
		}
	}()

	// –ó–¥–µ—Å—å –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–∞–Ω–∏–∫–∞
	panic("I forgot my towel")

	// –≠—Ç–æ—Ç –∫–æ–¥ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω
	fmt.Println("This line will not be printed")
}

```

```go
package main

import "fmt"

func riskyFunction() {
	fmt.Println("–ù–∞—á–∞–ª–æ riskyFunction")
	panic("–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ –≤ riskyFunction!")
	// –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ —É–∂–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è
	fmt.Println("–ö–æ–Ω–µ—Ü riskyFunction")
}

func main() {
	// –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ø–∞–Ω–∏–∫—É
	defer func() {
		if r := recover(); r != nil {
			fmt.Println("–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–∞–Ω–∏–∫–∏:", r)
		}
	}()

	fmt.Println("–ó–∞–ø—É—Å–∫ riskyFunction")
	riskyFunction() // –∑–¥–µ—Å—å –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç panic
	fmt.Println("–ü–æ—Å–ª–µ riskyFunction") // —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è
}

```

```go
package main

import "fmt"

func safeDivide(a, b int) (result int) {
	defer func() {
		if r := recover(); r != nil {
			fmt.Println("‚ö†Ô∏è Panic caught:", r)
			result = 0 // –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
		}
	}()

	return a / b // –µ—Å–ª–∏ b == 0 ‚Üí panic
}

func main() {
	fmt.Println("10 / 2 =", safeDivide(10, 2))
	fmt.Println("10 / 0 =", safeDivide(10, 0)) // –ø–µ—Ä–µ—Ö–≤–∞—Ç panic
	fmt.Println("‚úÖ Program continues normally")
}

```

# Gorutines

–ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è, –≤—ã–∑–≤–∞–≤—à–∞—è gorutine –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è, —Ç–æ –∏ –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å

–¢–∞–∫–æ–π –∫–æ–¥ –Ω–µ –≤—ã–≤–µ–¥–µ—Ç –Ω–∏—á–µ–≥–æ

```go
package main

import (
	"fmt"
	"time"
)

func main() {
	for i := 0; i < 5; i = i + 1 {
		go sleepyGopher()
	}

	// time.Sleep(10 * time.Second)
}

func sleepyGopher() {
	time.Sleep(4 * time.Second)
	fmt.Println("hrrrrr")
}

```

–ê –µ—Å–ª–∏ –º—ã –ø–æ–¥–æ–∂–¥—ë–º

```go
package main

import (
	"fmt"
	"time"
)

func main() {
	for i := range 5 {
		go sleepyGopher()
	}

	time.Sleep(10 * time.Second)
}

func sleepyGopher() {
	time.Sleep(4 * time.Second)
	fmt.Println("hrrrrr")
}

```

—Ç–æ —É–∂–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤—Å–µ gorutines

–ü—Ä–∏ —ç—Ç–æ–º –µ—Å—Ç—å –±–æ–ª–µ–µ —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–¥–æ–∂–¥–∞—Ç—å

```go
package main

import (
	"fmt"
	"sync"
	"time"
)

func main() {
	var wg sync.WaitGroup

	for _ = range 5 {
		wg.Add(1)
		go sleepyGopher(&wg)
	}

	wg.Wait() // –∂–¥—ë–º, –ø–æ–∫–∞ –≤—Å–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–∫–æ–Ω—á–∞—Ç
}

func sleepyGopher(wg *sync.WaitGroup) {
	defer wg.Done() // —Å–æ–æ–±—â–∞–µ–º, —á—Ç–æ –≥–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

	time.Sleep(4 * time.Second)
	fmt.Println("hrrrrr")
}

```

–ë—ã–≤–∞—é—Ç –∞–Ω–æ–Ω–∏–º–Ω—ã–º–∏ (–æ–±—ä—è–≤–ª—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Å–ª–æ–≤–∞ Go)

```go
package main

import (
	"fmt"
)

func main() {
	ch := make(chan int) // –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª

	go func() {
		ch <- 1 // –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –ø–æ–∫–∞ –∫—Ç–æ-—Ç–æ –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–µ—Ç
	}()

	x := <-ch // main –≥–æ—Ä—É—Ç–∏–Ω–∞ –∂–¥—ë—Ç –∑–Ω–∞—á–µ–Ω–∏–µ
	fmt.Println(x)
}

```

## wg.Wait(), wg.Go() –∏ errgroup.Group()

–ö–∞–∫ –¥–µ–ª–∞–ª–∏ —Ä–∞–Ω—å—à–µ

```go
var wg sync.WaitGroup
    for i := 0; i < numWorkers; i++ {
        wg.Add(1)  // Add BEFORE launching goroutine
        go func(id int) {
            defer wg.Done()  // Always use defer
            // Perform work
            fmt.Printf("Worker %d completed\\n", id)
        }(i)
    }
wg.Wait()  // Block until all complete
```

–° –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º 1.25

```go
var wg sync.WaitGroup
    for i := 0; i < numWorkers; i++ {
        wg.Go(func() {
            // Work here - no manual Add()/Done()
            fmt.Printf("Worker %d completed\\n", i)
        })
    }
wg.Wait()
```

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è

```go
func (wg *WaitGroup) Go(f func()) {
	wg.Add(1)
	go func() {
		defer wg.Done()
		f()
	}()
}

```

## errgroup.Group

–≠—Ç–æ –ø–∞–∫–µ—Ç¬†`golang.org/x/sync/errgroup`.

–û–Ω –¥–µ–ª–∞–µ—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ¬†`WaitGroup`, –Ω–æ¬†**–ø–ª—é—Å**:

- —É–º–µ–µ—Ç¬†**—Å–æ–±–∏—Ä–∞—Ç—å –ø–µ—Ä–≤—É—é –æ—à–∏–±–∫—É**¬†–∏–∑ –≥–æ—Ä—É—Ç–∏–Ω;
- —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å¬†**–∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º**¬†(`context.Context`).

```go
import "golang.org/x/sync/errgroup"

func main() {
	var g errgroup.Group

	for i := 0; i < 3; i++ {
		i := i
		g.Go(func() error {
			if i == 1 {
				return fmt.Errorf("worker %d failed", i)
			}
			fmt.Println("worker", i)
			return nil
		})
	}

	if err := g.Wait(); err != nil {
		fmt.Println("–û—à–∏–±–∫–∞:", err)
	}
}

```

# –ö–∞–Ω–∞–ª—ã

### –ù–µ–±—É—Ñ—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

```go
ch := make(chan int)
```

üìå¬†**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç**:

- –û—Ç–ø—Ä–∞–≤–∫–∞¬†`ch <- 42`¬†**–∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—É**, –ø–æ–∫–∞¬†**–¥—Ä—É–≥–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –Ω–µ –ø—Ä–æ—á—Ç—ë—Ç –∑–Ω–∞—á–µ–Ω–∏–µ**¬†`x := <-ch`.
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ: —á—Ç–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç, –µ—Å–ª–∏ –≤ –∫–∞–Ω–∞–ª–µ –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç.

### –ë—É—Ñ—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª

```go
ch := make(chan int, 3) // –±—É—Ñ–µ—Ä –Ω–∞ 3 –∑–Ω–∞—á–µ–Ω–∏—è
```

üìå¬†**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç**:

- –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ 3 –∑–Ω–∞—á–µ–Ω–∏–π,¬†**–Ω–µ –±–ª–æ–∫–∏—Ä—É—è—Å—å**.
- –ß—Ç–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –µ—Å–ª–∏ –≤ –±—É—Ñ–µ—Ä–µ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç.
- –û—Ç–ø—Ä–∞–≤–∫–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –µ—Å–ª–∏ –±—É—Ñ–µ—Ä¬†**–ø–æ–ª–Ω—ã–π**.

```go
package main

import "fmt"

func main() {
	ch := make(chan int, 2) // –≤ –±—É—Ñ—Ñ–µ—Ä–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –¥–æ 2 –∑–Ω–∞—á–µ–Ω–∏–π
	ch <- 1
	ch <- 2

	fmt.Println(<-ch)
	fmt.Println(<-ch)

	ch <- 3

	fmt.Println(<-ch)

	// fmt.Println(<-ch) // –û—à–∏–±–∫–∞ –±—É–¥–µ—Ç, –≤ –∫–∞–Ω–∞–ª–µ –ø—É—Å—Ç–æ

}
```

### –û–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã

–¢–æ–ª—å–∫–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏–ª–∏ –∑–∞–ø–∏—Å—å

```go
var sendOnly chan<- int     // —Ç–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–∫–∞
var receiveOnly <-chan int  // —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
```

–û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞—Ö —Ñ—É–Ω–∫—Ü–∏–π, —á—Ç–æ–±—ã –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ

```go
func producer(out chan<- int) {
    out <- 42
}

func consumer(in <-chan int) {
    fmt.Println(<-in)
}

func sendOnly(ch chan<- int) {
    ch <- 1
}

func readOnly(ch <-chan int) {
    fmt.Println(<-ch)
}
```

–ï—â—ë –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è

- –í¬†**API –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö**¬†‚Äî —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞–µ—Ç –∏–ª–∏ –ø–∏—à–µ—Ç
- –í¬†**–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–∞—Ö**¬†‚Äî —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫, –∫–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ —Å–ª—É—á–∞–π–Ω–æ –ø–∏—à–µ—Ç –≤ –∫–∞–Ω–∞–ª, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–æ–ª–∂–µ–Ω —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—Ç—å

üß†¬†**–ò—Ç–æ–≥**: –æ–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã ‚Äî —ç—Ç–æ¬†**–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞**¬†–Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞, —á—Ç–æ–±—ã –Ω–µ –¥–æ–ø—É—Å—Ç–∏—Ç—å –æ—à–∏–±–æ–∫.

## Select

select –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∂–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–∞–Ω–∞–ª–∞–º–∏ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–≤—É—é, –∫–æ—Ç–æ—Ä–∞—è —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞.

–≠—Ç–æ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä–∞—è —É–º–µ–µ—Ç –∂–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∏ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è

```go
package main

import (
	"fmt"
	"math/rand"
	"time"
)

// sleepyGopher ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è "–∑–∞—Å—ã–ø–∞–µ—Ç" –Ω–∞ —Å–ª—É—á–∞–π–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ 4 —Å–µ–∫—É–Ω–¥,
// –∞ –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–π id –≤ –∫–∞–Ω–∞–ª
func sleepyGopher(id int, c chan int) {
	time.Sleep(time.Duration(rand.Intn(4000)) * time.Millisecond)
	c <- id
}

func main() {
	// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π seed –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª
	// –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥–∞—Ö
	rand.Seed(time.Now().UnixNano())

	// –°–æ–∑–¥–∞—ë–º –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏
	c := make(chan int)

	// –ó–∞–ø—É—Å–∫–∞–µ–º 5 –≥–æ—Ä—É—Ç–∏–Ω, –∫–∞–∂–¥–∞—è –±—É–¥–µ—Ç "—Å–ø–∞—Ç—å" –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–π id
	for i := 0; i < 5; i++ {
		go sleepyGopher(i, c)
	}

	// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–∞—É—Ç: —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
	timeout := time.After(2 * time.Second)

	// –û–∂–∏–¥–∞–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è 5 –≥–æ—Ä—É—Ç–∏–Ω –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç–∞
	for i := 0; i < 5; i++ {
		select {
		case gopherID := <-c:
			fmt.Println("gopher", gopherID, "has finished sleeping")
		case <-timeout:
			fmt.Println("my patience ran out")
			return
		}
	}
}

```

–ö–æ–≥–¥–∞ –º—ã¬†**–ø–µ—Ä–µ—Å—Ç–∞—ë–º –∂–¥–∞—Ç—å –≥–æ—Ä—É—Ç–∏–Ω—ã**¬†(–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ä–∞–±–æ—Ç–∞–ª —Ç–∞–π–º–∞—É—Ç –∏ –º—ã –≤—ã—à–ª–∏ –∏–∑¬†`main`), —ç—Ç–æ¬†**–Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—Å–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å**. –û–Ω–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è¬†**–≤ —Ñ–æ–Ω–µ**, –ø–æ—Ç—Ä–µ–±–ª—è—è –ø–∞–º—è—Ç—å –∏ —Ä–µ—Å—É—Ä—Å—ã.

Go **–Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—É**, –ø–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç¬†`main`-–≥–æ—Ä—É—Ç–∏–Ω–∞. –ù–æ –µ—Å–ª–∏¬†`main()`¬†–∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å, –∞ –¥—Ä—É–≥–∏–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –æ—Å—Ç–∞–ª–∏—Å—å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ ‚Äî¬†**Go –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å**, –∏ —Ç–∞–∫–∏–µ –≥–æ—Ä—É—Ç–∏–Ω—ã¬†**–æ–±—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ**, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É—Ç–µ—á–∫–∞–º —Ä–µ—Å—É—Ä—Å–æ–≤ –∏–ª–∏ –¥—Ä—É–≥–∏–º –±–∞–≥–∞–º.

### –¢–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

Go-–ø—Ä–æ–≥—Ä–∞–º–º–∞, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å "–≤–∏—Å—è—â–∏–º–∏" –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏,¬†**–Ω–µ –≤—Ä–µ–¥–∏—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä—É**. –û–Ω–∞ –ø—Ä–æ—Å—Ç–æ¬†**–∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∂—ë—Å—Ç–∫–æ**, –∏:

- –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –≥–æ—Ä—É—Ç–∏–Ω—ã¬†**–æ–±—Ä—ã–≤–∞—é—Ç—Å—è**,
- **–≤—Å—è –≤—ã–¥–µ–ª–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è**,
- –Ω–∏–∫–∞–∫–∏—Ö ¬´—É—Ç–µ—á–µ–∫ –≤ —Å–∏—Å—Ç–µ–º—É¬ª –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç,
- **–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è**.

### –ß—Ç–æ –∑–Ω–∞—á–∏—Ç "–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É—Ç–µ—á–∫–∞–º —Ä–µ—Å—É—Ä—Å–æ–≤"?

–≠—Ç–æ¬†**–≤–Ω—É—Ç—Ä–∏ —Å–∞–º–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã**, –Ω–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–∏—Å—Ç–µ–º—ã. –ù–∞–ø—Ä–∏–º–µ—Ä:

- –µ—Å–ª–∏ —Ç—ã –æ—Ç–∫—Ä—ã–≤–∞–ª —Ñ–∞–π–ª –∏–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, –∏ –Ω–µ –∑–∞–∫—Ä—ã–ª ‚Äî —ç—Ç–æ¬†**–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–≥**¬†–ø—Ä–æ–≥—Ä–∞–º–º—ã;
- –µ—Å–ª–∏ –≥–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–≤–∏—Å–ª–∞ –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ –∏–ª–∏ –∂–¥—ë—Ç –ø–æ –∫–∞–Ω–∞–ª—É ‚Äî¬†**–æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –Ω–µ –¥–µ–ª–∞–µ—Ç –Ω–∏—á–µ–≥–æ –ø–æ–ª–µ–∑–Ω–æ–≥–æ**, –ø–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç¬†`main`.

### –ß—Ç–æ —Å—Ç–æ–∏—Ç –¥–µ–ª–∞—Ç—å –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É:

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å¬†**–∫–∞–Ω–∞–ª—ã –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**¬†(`done`),¬†`context.WithCancel`,¬†`WaitGroup`¬†‚Äî —á—Ç–æ–±—ã¬†**–∫—Ä–∞—Å–∏–≤–æ –∑–∞–≤–µ—Ä—à–∞—Ç—å –≥–æ—Ä—É—Ç–∏–Ω—ã**;
- –°–ª–µ–¥–∏—Ç—å, —á—Ç–æ–±—ã¬†**`main()`¬†–Ω–µ –∑–∞–≤–µ—Ä—à–∞–ª–∞—Å—å, –ø–æ–∫–∞ –≤—Å—ë –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ**;
- –ï—Å–ª–∏ –∫–æ–¥ —É—á–µ–±–Ω—ã–π/–¥–µ–º–æ ‚Äî –º–æ–∂–Ω–æ –Ω–µ –∑–∞–º–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è. –ù–æ –≤ –Ω–∞—Å—Ç–æ—è—â–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö ‚Äî –ª—É—á—à–µ –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –æ—Å—Ç–∞–Ω–æ–≤–∫—É.

## nil-–∫–∞–Ω–∞–ª—ã

–ò–Ω–æ–≥–¥–∞ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å¬†`select`, –≤ –∫–æ—Ç–æ—Ä–æ–º —É—á–∞—Å—Ç–≤—É—é—Ç¬†**–Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª–æ–≤**, –Ω–æ¬†**–Ω–µ –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã**¬†–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –¢–æ–≥–¥–∞ –º–æ–∂–Ω–æ¬†**"–≤—ã–∫–ª—é—á–∏—Ç—å" –∫–∞–Ω–∞–ª, –ø—Ä–∏—Å–≤–æ–∏–≤ –µ–º—É nil**, –∏¬†`select`¬†–±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∫–µ–π—Å.

–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –∫–∞–Ω–∞–ª–æ–≤

```go
var ch chan int = nil

go func() {
	time.Sleep(2 * time.Second)
	ch = make(chan int, 1)
	ch <- 42
}()

for {
	select {
	case v := <-ch:
		fmt.Println("Got value:", v)
		return
	default:
		fmt.Println("Waiting...")
		time.Sleep(500 * time.Millisecond)
	}
}

```

üîç –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

- `ch`¬†—Å–Ω–∞—á–∞–ª–∞ nil, –ø–æ—ç—Ç–æ–º—É¬†`select`¬†–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç¬†`case v := <-ch`;
- –ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã¬†`ch`¬†—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ä–∞–±–æ—á–∏–º;
- –¢–æ–≥–¥–∞¬†`select`¬†"–∑–∞–º–µ—á–∞–µ—Ç" –∫–∞–Ω–∞–ª –∏ –ø–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏

## –†–µ–∑—é–º–µ

- **nil-–∫–∞–Ω–∞–ª**¬†–≤ Go ‚Äî —ç—Ç–æ –∫–∞–Ω–∞–ª, –∫–æ—Ç–æ—Ä—ã–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç.
- –û–Ω¬†**–Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–∞–Ω–∏–∫—É**, –Ω–æ¬†**–±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–≤—Å–µ–≥–¥–∞**.
- –≠—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤¬†`select`, —á—Ç–æ–±—ã¬†**–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ "–≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å" –∫–∞–Ω–∞–ª—ã**.

–ï—â—ë –æ–¥–∏–Ω –ø—Ä–∏–º–µ—Ä

```go
package main

import (
	"fmt"
	"time"
)

func main() {
	dataCh := make(chan string)
	cancelCh := time.After(3 * time.Second) // –∫–∞–Ω–∞–ª —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã

	go func() {
		// –ò–º–∏—Ç–∞—Ü–∏—è –¥–æ–ª–≥–æ–π —Ä–∞–±–æ—Ç—ã
		time.Sleep(2 * time.Second)
		dataCh <- "Operation completed successfully"
	}()

	for {
		select {
		case msg := <-dataCh:
			fmt.Println("Success:", msg)
			// –û–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å ‚Äî –æ—Ç–∫–ª—é—á–∏–º cancelCh
			cancelCh = nil
			return
		case <-cancelCh:
			fmt.Println("Timeout! Operation took too long.")
			return
		default:
			fmt.Println("Working...")
			time.Sleep(500 * time.Millisecond)
		}
	}
}

```

üß† –ß—Ç–æ –¥–µ–ª–∞–µ—Ç¬†`cancelCh = nil`?

–≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç:

- –ë–µ–∑ —ç—Ç–æ–≥–æ¬†`cancelCh`¬†—á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã¬†**–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç**, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞.
- –ï—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Ä–∞–Ω—å—à–µ, –∏ –º—ã¬†**"–æ–±–Ω—É–ª–∏–ª–∏" –∫–∞–Ω–∞–ª**, —Ç–æ¬†`select`¬†**–ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –µ–≥–æ —Å–ª—É—à–∞—Ç—å**.

üéì –í —á—ë–º —Ñ–∏—à–∫–∞ nil-–∫–∞–Ω–∞–ª–æ–≤ –≤¬†`select`?

- –ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å¬†**–≥–∏–±–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ª–æ–≥–∏–∫–æ–π select**, —Ç—ã –º–æ–∂–µ—à—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å –Ω—É–∂–Ω—ã–µ –∫–∞–Ω–∞–ª—ã —Å –ø–æ–º–æ—â—å—é¬†`nil`.
- –≠—Ç–æ¬†**—á–∏—Å—Ç—ã–π —Å–ø–æ—Å–æ–± —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –±–µ–∑ —Ñ–ª–∞–≥–æ–≤, —É—Å–ª–æ–≤–∏–π –∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞.**

## –ö–∞–∫ –∑–∞–≤–µ—Ä—à–∞—Ç—å –≥–æ—Ä—É—Ç–∏–Ω—ã –∫—Ä–∞—Å–∏–≤–æ?

```go
package main

import (
	"fmt"
	"math/rand"
	"time"
)

// sleepyGopher —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –ø—Ä–∏–¥—ë—Ç —Å–∏–≥–Ω–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
func sleepyGopher(id int, done <-chan struct{}) {
	for {
		select {
		case <-done:
			fmt.Println("Gopher", id, "got the signal to stop.")
			return
		default:
			// –∏–º–∏—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã
			fmt.Println("Gopher", id, "is working...")
			time.Sleep(time.Duration(rand.Intn(1000)) * time.Millisecond)
		}
	}
}

func main() {
	rand.Seed(time.Now().UnixNano())

	done := make(chan struct{}) // –∫–∞–Ω–∞–ª –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –≥–æ—Ä—É—Ç–∏–Ω

	for i := 0; i < 3; i++ {
		go sleepyGopher(i, done)
	}

	time.Sleep(2 * time.Second) // –∂–¥—ë–º –Ω–µ–º–Ω–æ–≥–æ
	fmt.Println("Main: time is up, asking goroutines to stop")

	close(done) // –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–∏–≥–Ω–∞–ª –≤—Å–µ–º –≥–æ—Ä—É—Ç–∏–Ω–∞–º –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è

	time.Sleep(1 * time.Second) // –¥–∞—ë–º –∏–º –≤—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –∫—Ä–∞—Å–∏–≤–æ
	fmt.Println("Main: all done")
}

```

# Generic

### –ß—Ç–æ —Ç–∞–∫–æ–µ generic –≤ Go

**Generics**¬†‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± –ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, —Ç–∏–ø—ã –∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç¬†**—Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö**, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º¬†**–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞**.

üìå –î–æ Go 1.18 –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –ø–∏—Å–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–¥ –∫–∞–∂–¥—ã–π —Ç–∏–ø (int, float64, string –∏ —Ç. –¥.). –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –æ–¥–Ω—É —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é

```go
package main

import (
	"fmt"
)

// AddOrConcat –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã: int, float64 –∏ string
func AddOrConcat[T int | float64 | string](a, b T) T {
	return a + b
}

func main() {
	fmt.Println(AddOrConcat(3, 4))         // 7
	fmt.Println(AddOrConcat(1.5, 2.5))     // 4
	fmt.Println(AddOrConcat("Go", "lang")) // Golang

	// fmt.Println(AddOrConcat(true, false)) // ‚ùå –æ—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ ‚Äî —Ç–∏–ø –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
}

```

–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ —Ä–∞–±–æ—Ç—ã —Å –∫–∞–Ω–∞–ª–∞–º–∏ –∏ –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏

```go
package main

import (
	"fmt"
	"time"
)

// –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–ø–∏—Ç 3 —Å–µ–∫—É–Ω–¥—ã, –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å–æ–æ–±—â–∞–µ—Ç main-–≥–æ—Ä—É—Ç–∏–Ω–µ,
// —á—Ç–æ –æ–Ω–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∞, –ø–µ—Ä–µ–¥–∞–≤–∞—è —Å–≤–æ–π id –≤ –∫–∞–Ω–∞–ª.
func sleepyGopher(id int, c chan int) {
	time.Sleep(3 * time.Second)
	fmt.Println("... ", id, " snore ...")
	c <- id // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º id –æ–±—Ä–∞—Ç–Ω–æ –≤ –∫–∞–Ω–∞–ª
}

func main() {
	c := make(chan int) // —Å–æ–∑–¥–∞–¥–∏–º –∫–∞–Ω–∞–ª –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
	for i := 0; i < 5; i++ {
		go sleepyGopher(i, c) // –∑–∞–ø—É—Å–∫–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
	}
	for i := 0; i < 5; i++ {
		gopherID := <-c // –ø–æ–ª—É—á–∞–µ–º –∏–∑ –∫–∞–Ω–∞–ª–∞ —É–≤–µ–º–æ–ª–µ–Ω–∏–µ –æ–± –æ–∫–æ–Ω—á–∞–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏
		fmt.Println("gopher ", gopherID, " has finished sleeping")
	}

}

```

## –ü—Ä–∏–º–µ—Ä pipeline

–ö–æ–≥–¥–∞ –≥–æ—Ä—É—Ç–∏–Ω—ã –ø–µ—Ä–µ–¥–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç –æ–¥–Ω–æ–π –∫ –¥—Ä—É–≥–æ–π

```go
package main

import (
	"fmt"
	"strings"
)

// –ü–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –≤ –¥—Ä—É–≥—É—é –≥–æ—Ä—É—Ç–∏–Ω—É
func sourceGopher(downstream chan string) {
	for _, v := range []string{"hello world", "a bad apple", "goodbye all"} {
		downstream <- v
	}
	downstream <- "" // –°–∏–≥–Ω–∞–ª –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–µ–¥–∞—á–∏
}

// –§–∏–ª—å—Ç—Ä—É–µ–Ω –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø—Ä—ã–¥—É–¥—É—â–µ–π –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–ª—å—à–µ
func filterGopher(upstream, downstream chan string) {
	for {
		item := <-upstream
		if item == "" {
			downstream <- "" // –ø–µ—Ä–µ–¥–∞—ë–º —Å–∏–≥–Ω–∞–ª –¥–∞–ª—å—à–µ
			return
		}
		if !strings.Contains(item, "bad") {
			downstream <- item // —Ç–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–∏–µ —Å—Ç—Ä–æ–∫–∏
		}
	}
}

// –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π
// –∏ –ø–µ—á–∞—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Å–æ–ª—å
func printGopher(upstream chan string) {
	for {
		v := <-upstream
		if v == "" {
			return
		}
		fmt.Println(v)
	}
}

func main() {
	c0 := make(chan string)
	c1 := make(chan string)

	go sourceGopher(c0)     // –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å
	go filterGopher(c0, c1) // —Ñ–∏–ª—å—Ç—Ä—É—é—â–∏–π
	printGopher(c1)         // –ø–µ—á–∞—Ç–∞—é—â–∏–π
}

```

- `sourceGopher`¬†‚Äî –ø–µ—Ä–µ–¥–∞—ë—Ç —Å—Ç—Ä–æ–∫–∏ –ø–æ –∫–∞–Ω–∞–ª—É.
- `filterGopher`¬†‚Äî —É–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ¬†`"bad"`.
- `printGopher`¬†‚Äî –ø–µ—á–∞—Ç–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω.
- –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ¬†`""`¬†–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫¬†**—Å–∏–≥–Ω–∞–ª –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã**.
- –ü–æ—Ç–æ–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω—ã –∫–∞–Ω–∞–ª–∞–º–∏:¬†`c0`¬†(–ø–µ—Ä–µ–¥–∞—ë—Ç –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∫ —Ñ–∏–ª—å—Ç—Ä—É),¬†`c1`¬†(–æ—Ç —Ñ–∏–ª—å—Ç—Ä–∞ –∫ –ø—Ä–∏–Ω—Ç–µ—Ä—É).

–ü—Ä–∏ —ç—Ç–æ–º –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –º—ã —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —Å–æ–æ–±—â–∞–µ–º, —á—Ç–æ –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –±—É–¥–µ—Ç. –õ—É—á—à–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –∫–∞–Ω–∞–ª, –∫–æ–≥–¥–∞ –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ–º –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

```go
close(c)
```

–ï—Å–ª–∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —á–∏—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–∞–Ω–∞–ª–∞, –±—É–¥–µ–º –ø–æ–ª—É—á–∞—Ç—å –Ω—É–ª–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ª—é–±–æ–≥–æ —Ç–∏–ø–∞. –ï—Å–ª–∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–∏—Å–∞—Ç—å –≤ –∑–∞–∫—Ä—ã—Ç—ã–π –∫–∞–Ω–∞–ª, —ç—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –ø–∞–Ω–∏–∫—É

## –í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø—Ä–æ –∑–∞–∫—Ä—ã—Ç—ã–µ –∫–∞–Ω–∞–ª—ã

–ï—Å–ª–∏ —á–∏—Ç–∞—Ç—å –ø–æ —Ü–∏–∫–ª—É –∏–∑ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–∞–Ω–∞–ª–∞, –ø–æ–ª—É—á–∞—è –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ü–∏–∫–ª –±—É–¥–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º, —á—Ç–æ –±—É–¥–µ—Ç —Ç—Ä–∞—Ç–∏—Ç—å –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.

–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –æ—Ç–∫—Ä—ã—Ç –ª–∏ –∫–∞–Ω–∞–ª –ø–µ—Ä–µ–¥ —á—Ç–µ–Ω–∏–µ–º –∏–∑ –Ω–µ–≥–æ

–í–æ—Ç –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –≤–µ—Ä—Å–∏—è —ç—Ç–æ–≥–æ –∫–æ–¥–∞

```go
package main

import (
	"fmt"
	"strings"
)

// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–æ–∫–∏ –≤ –∫–∞–Ω–∞–ª –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –µ–≥–æ
func sourceGopher(downstream chan string) {
	for _, v := range []string{"hello world", "a bad apple", "goodbye all"} {
		downstream <- v
	}
	close(downstream) // –∑–∞–∫—Ä—ã–≤–∞–µ–º –∫–∞–Ω–∞–ª –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
}

// –§–∏–ª—å—Ç—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç —Ç–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–∏–µ –¥–∞–ª—å—à–µ, –∑–∞—Ç–µ–º –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –∫–∞–Ω–∞–ª
func filterGopher(upstream, downstream chan string) {
	for {
		item, ok := <-upstream
		if !ok {
			break // –≤—Ö–æ–¥–Ω–æ–π –∫–∞–Ω–∞–ª –∑–∞–∫—Ä—ã—Ç
		}
		if !strings.Contains(item, "bad") {
			downstream <- item
		}
	}
	close(downstream) // –∑–∞–∫—Ä—ã–≤–∞–µ–º –≤—ã—Ö–æ–¥–Ω–æ–π –∫–∞–Ω–∞–ª
}

// –ü–æ–ª—É—á–∞–µ—Ç –∏ –ø–µ—á–∞—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ –¥–æ –µ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è
func printGopher(upstream chan string) {
	for {
		v, ok := <-upstream
		if !ok {
			break // –∫–∞–Ω–∞–ª –∑–∞–∫—Ä—ã—Ç
		}
		fmt.Println(v)
	}
}

func main() {
	c0 := make(chan string)
	c1 := make(chan string)

	go sourceGopher(c0)
	go filterGopher(c0, c1)
	printGopher(c1)
}

```

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç

```go
package main

import (
	"fmt"
	"strings"
)

// –ü–µ—Ä–µ–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∫–∞–Ω–∞–ª –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –µ–≥–æ
func sourceGopher(downstream chan string) {
	for _, v := range []string{"hello world", "a bad apple", "goodbye all"} {
		downstream <- v
	}
	close(downstream) // —Å–∏–≥–Ω–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
}

// –§–∏–ª—å—Ç—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤—ã—Ö–æ–¥–Ω–æ–π –∫–∞–Ω–∞–ª
func filterGopher(upstream, downstream chan string) {
	for item := range upstream {
		if !strings.Contains(item, "bad") {
			downstream <- item
		}
	}
	close(downstream) // –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è —á—Ç–µ–Ω–∏—è
}

// –ü–æ–ª—É—á–∞–µ—Ç –∏ –ø–µ—á–∞—Ç–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ–∫–∞ –∫–∞–Ω–∞–ª –Ω–µ –∑–∞–∫—Ä—ã—Ç
func printGopher(upstream chan string) {
	for v := range upstream {
		fmt.Println(v)
	}
}

func main() {
	c0 := make(chan string)
	c1 := make(chan string)

	go sourceGopher(c0)     // –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
	go filterGopher(c0, c1) // —Ñ–∏–ª—å—Ç—Ä—É—é—â–∏–π
	printGopher(c1)         // –≤—ã–≤–æ–¥
}

```

–ó–¥–µ—Å—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –∑–Ω–∞—á–µ–Ω–∏—è–º –∫–∞–Ω–∞–ª–∞, –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ, —á—Ç–æ –∫–∞–Ω–∞–ª–µ –Ω–µ –∑–∞–∫—Ä—ã—Ç

# –î–ª—è –ø—Ä–∏–º–µ—Ä–∞

## –ù–æ–º–µ—Ä –æ–¥–∏–Ω

```go
print("Hello Svetik!")
```

# Mutex

**Mutex (mutual exclusion ‚Äî –≤–∑–∞–∏–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ)**¬†‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è¬†**—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞**¬†–∫ —Ä–∞–∑–¥–µ–ª—è–µ–º—ã–º (shared) –¥–∞–Ω–Ω—ã–º –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏.

### –ó–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?

–ö–æ–≥–¥–∞¬†**–Ω–µ—Å–∫–æ–ª—å–∫–æ –≥–æ—Ä—É—Ç–∏–Ω –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**¬†—á–∏—Ç–∞—é—Ç –∏/–∏–ª–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –≤¬†**–æ–¥–Ω—É –∏ —Ç—É –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é**, –º–æ–∂–µ—Ç —Å–ª—É—á–∏—Ç—å—Å—è¬†**—Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏ (race condition)**. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–º –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º.

**–ú—å—é—Ç–µ–∫—Å**¬†–ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã¬†**—Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**¬†–∏–º–µ–ª–∞ –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–∏–º –¥–∞–Ω–Ω—ã–º.

```go
package main

import "sync"

var mu sync.Mutex // —Å–æ–∑–¥–∞—ë–º –º—å—é—Ç–µ–∫—Å

func main() {
	mu.Lock()         // –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –º—å—é—Ç–µ–∫—Å
	defer mu.Unlock() // –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º –≤ –∫–æ–Ω—Ü–µ —Ñ—É–Ω–∫—Ü–∏–∏

	// –∑–¥–µ—Å—å –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–±–æ—Ç–∞ —Å –æ–±—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
}

```

–ö–∞–∫ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –º—å—é—Ç–µ–∫—Å

```go
type Visited struct {
	mu sync.Mutex            // –∑–∞—â–∏—â–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ map
	visited map[string]int   // –æ–±—â–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
}
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç:

- –í Go¬†**–º–µ—Ç–æ–¥—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ù–ï —è–≤–ª—è—é—Ç—Å—è ‚Äú–ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏‚Äù –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**.
- –ï—Å–ª–∏ —Ç—ã¬†**–Ω–µ –≤–∏–¥–∏—à—å —è–≤–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (mutex) –∏–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è ‚Äúsafe for concurrent use‚Äù**,¬†**–Ω–µ–ª—å–∑—è**–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

- üîí –ú—å—é—Ç–µ–∫—Å ‚Äî –ø—Ä–∏–º–∏—Ç–∏–≤ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±—â–∏–º –¥–∞–Ω–Ω—ã–º.
- üë• –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≥–æ—Ä—É—Ç–∏–Ω –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ‚Äî –Ω—É–∂–µ–Ω –º—å—é—Ç–µ–∫—Å.
- üì¶ –ß–∞—Å—Ç–æ –ø—Ä—è—á—É—Ç –º—å—é—Ç–µ–∫—Å –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏–ª–∏ –ø–∞–∫–µ—Ç–∞, —á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å –æ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
- üí• map –≤ Go –Ω–µ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞ ‚Äî –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω –Ω—É–∂–Ω–∞ –∑–∞—â–∏—Ç–∞.

–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ —Å –º—å—é—Ç–µ–∫—Å–∞–º–∏

```go
package main

import (
	"fmt"
	"sync"
)

// Visited –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø–æ—Å–µ—â—ë–Ω–Ω—ã–µ URL
type Visited struct {
	mu      sync.Mutex
	visited map[string]int
}

// NewVisited —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å map
func NewVisited() *Visited {
	return &Visited{
		visited: make(map[string]int),
	}
}

// MarkVisited –¥–æ–±–∞–≤–ª—è–µ—Ç URL –≤ map, –∑–∞—â–∏—â—ë–Ω–Ω–æ
func (v *Visited) MarkVisited(url string) {
	v.mu.Lock()
	defer v.mu.Unlock()

	v.visited[url]++
}

// HasVisited –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –±—ã–ª –ª–∏ URL —É–∂–µ –ø–æ—Å–µ—â—ë–Ω
func (v *Visited) HasVisited(url string) bool {
	v.mu.Lock()
	defer v.mu.Unlock()

	_, ok := v.visited[url]
	return ok
}

// Count –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–µ—â–µ–Ω–∏–π
func (v *Visited) Count() int {
	v.mu.Lock()
	defer v.mu.Unlock()

	return len(v.visited)
}

func main() {
	v := NewVisited()
	var wg sync.WaitGroup

	// –ò–º–∏—Ç–∏—Ä—É–µ–º 10 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Å–µ—â–µ–Ω–∏–π
	for i := 0; i < 10; i++ {
		wg.Add(1)
		go func(i int) {
			defer wg.Done()
			url := fmt.Sprintf("https://example.com/page%d", i%3) // page0, page1, page2
			v.MarkVisited(url)
		}(i)
	}

	wg.Wait()

	fmt.Println("–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö URL:", v.Count())
	fmt.Println("–ü–æ—Å–µ—â—ë–Ω –ª–∏ page1?", v.HasVisited("https://example.com/page1"))
}

```

```go
package main

import (
	"fmt"
	"sync"
)

// –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —á–∏—Å–ª–æ–º –∏ –º—å—é—Ç–µ–∫—Å–æ–º
type Counter struct {
	mu    sync.Mutex
	value int
}

// –ú–µ—Ç–æ–¥, –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–π —Å—á—ë—Ç—á–∏–∫
func (c *Counter) Increment() {
	c.mu.Lock()         // –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –º—å—é—Ç–µ–∫—Å
	defer c.mu.Unlock() // –û—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏

	c.value++
}

func main() {
	var wg sync.WaitGroup
	counter := Counter{}

	// –ó–∞–ø—É—Å–∫–∞–µ–º 5 –≥–æ—Ä—É—Ç–∏–Ω
	for i := 0; i < 5; i++ {
		wg.Add(1)
		go func() {
			defer wg.Done()
			counter.Increment()
		}()
	}

	wg.Wait()
	fmt.Println("–ò—Ç–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:", counter.value)
}

```

–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å

> –ê –≥–¥–µ —Ñ—É–Ω–∫—Ü–∏—è (–≥–æ—Ä—É—Ç–∏–Ω–∞) –ø—Ä–æ–≤–µ—Ä—è—Ç, –æ—Ç–∫—Ä—ã—Ç –ª–∏ –º—å—é—Ç–µ–∫—Å? –ú–æ–∂–Ω–æ –ª–∏ –Ω–∞—á–∏–Ω–∞—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–ª–∏ –º—å—é—Ç–µ–∫—Å –∑–∞–∫—Ä—ã—Ç?
–í –∫–∞–∫–æ–º –º–µ—Å—Ç–µ –∫–æ–¥–∞?
>

–û—Ç–≤–µ—Ç

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ¬†**—Ç—ã —è–≤–Ω–æ —ç—Ç–æ –Ω–µ –ø–∏—à–µ—à—å**. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç¬†**–≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è**¬†—Ñ—É–Ω–∫—Ü–∏—è¬†`mu.Lock()`.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç mu.Lock()

- –ö–æ–≥–¥–∞ —Ç—ã –≤—ã–∑—ã–≤–∞–µ—à—å¬†`mu.Lock()`, Go –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
    - ‚ùó –ï—Å—Ç—å –ª–∏ —É–∂–µ –∫—Ç–æ-—Ç–æ, –∫—Ç–æ –¥–µ—Ä–∂–∏—Ç —ç—Ç–æ—Ç –º—å—é—Ç–µ–∫—Å?
        - –ï—Å–ª–∏¬†**–Ω–µ—Ç**¬†‚Äî —Ç—ã –µ–≥–æ –ø–æ–ª—É—á–∞–µ—à—å —Å—Ä–∞–∑—É –∏ –∏–¥—ë—à—å –¥–∞–ª—å—à–µ.
        - –ï—Å–ª–∏¬†**–¥–∞**¬†‚Äî —Ç–≤–æ—è –≥–æ—Ä—É—Ç–∏–Ω–∞¬†**–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è**¬†–∏¬†**–∂–¥—ë—Ç**, –ø–æ–∫–∞ –º—å—é—Ç–µ–∫—Å –æ—Å–≤–æ–±–æ–¥—è—Ç.
- –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ç—ã –ø–∏—à–µ—à—å —Å–≤–æ–π –∫–æ–¥, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–º–µ–Ω—è–µ—à—å –æ–±—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.
- –ö–æ–≥–¥–∞ —Ç—ã –≤—ã–∑—ã–≤–∞–µ—à—å¬†`mu.Unlock()`, –º—å—é—Ç–µ–∫—Å¬†**–æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è**, –∏¬†**–æ–¥–Ω–∞**¬†–∏–∑ –∂–¥—É—â–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

–û–¥–Ω–∞–∫–æ –µ—Å—Ç—å –º–µ—Ç–æ–¥ –µ—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–¥–µ–ª–∞—Ç—å —Ä—É–∫–∞–º–∏

```go
ok := mu.TryLock()
```

–û–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç¬†`true`, –µ—Å–ª–∏ –∑–∞—Ö–≤–∞—Ç–∏—Ç—å —É–¥–∞–ª–æ—Å—å, –∏¬†`false`, –µ—Å–ª–∏ –º—å—é—Ç–µ–∫—Å –∑–∞–Ω—è—Ç. –ù–æ¬†`TryLock()`¬†–ø–æ—è–≤–∏–ª—Å—è —Ç–æ–ª—å–∫–æ –≤¬†**Go 1.18**, –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∂–µ.

## worker

## –ß—Ç–æ —Ç–∞–∫–æ–µ worker

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å¬†**—Ä–∞–±–æ—á–∏–π**, –∫–æ—Ç–æ—Ä—ã–π —Å–∏–¥–∏—Ç –∏ –∂–¥—ë—Ç –∑–∞–¥–∞–Ω–∏—è.

- –û–Ω¬†**–Ω–µ –¥–µ–ª–∞–µ—Ç –Ω–∏—á–µ–≥–æ**, –ø–æ–∫–∞ –Ω–µ –ø–æ—Å—Ç—É–ø–∏—Ç –∑–∞–¥–∞—á–∞.
- –ö–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞ –ø—Ä–∏—à–ª–∞ ‚Äî –æ–Ω¬†**–≤—ã–ø–æ–ª–Ω—è–µ—Ç –µ—ë**, –∑–∞—Ç–µ–º —Å–Ω–æ–≤–∞¬†**—Å–∞–¥–∏—Ç—Å—è –∂–¥–∞—Ç—å**.
- –û–Ω –Ω–µ —É—Ö–æ–¥–∏—Ç –¥–æ–º–æ–π, –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –≤ —Ü–∏–∫–ª–µ.

–≠—Ç–æ—Ç —Ä–∞–±–æ—á–∏–π ‚Äî –∏ –µ—Å—Ç—å¬†**–≤–æ—Ä–∫–µ—Ä**.

```go
func worker() {
    for {
        select {
        case job := <-jobChannel:
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∑–∞–¥–∞—á—É
        case <-quitChannel:
            // –ö—Ç–æ-—Ç–æ —Å–∫–∞–∑–∞–ª "—Ö–≤–∞—Ç–∏—Ç" ‚Äî –≤—ã—Ö–æ–¥–∏–º
            return
        }
    }
}

```

–ó–¥–µ—Å—å —Ö–æ—Ç—è—Ç —Å–∫–∞–∑–∞—Ç—å: ¬´**—ç—Ç–æ—Ç –≤–æ—Ä–∫–µ—Ä –±—É–¥–µ—Ç –≤–µ—á–Ω–æ —Å–∏–¥–µ—Ç—å –∏ –∂–¥–∞—Ç—å –∑–∞–¥–∞—á–∏ –∏–∑ –∫–∞–Ω–∞–ª–∞ –≤ select**¬ª

```go
func worker() {
    for {
        select {
            // Wait for channels here.
        }
    }
}
```

üß† –ï—â—ë –ø—Ä–æ—â–µ: –≤–æ—Ä–∫–µ—Ä = –≥–æ—Ä—É—Ç–∏–Ω–∞ —Å —Ü–∏–∫–ª–æ–º, –∫–æ—Ç–æ—Ä–∞—è –∂–¥—ë—Ç –∑–∞–¥–∞—á–∏ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö.

# –ú–æ–∫

–í–æ—Ç –∫–æ–¥ Gin —Å–µ—Ä–≤–µ—Ä–∞ —Å –ø–æ–¥–ª—é—á–µ–Ω–∏–µ–º –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

```go
package main

import (
	"database/sql"
	"net/http"

	"github.com/gin-gonic/gin"
	_ "github.com/lib/pq" // PostgreSQL driver
)

var db *sql.DB

func initDB() error {
	var err error
	// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL (–∏–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ —Å–≤–æ—é)
	db, err = sql.Open("postgres", "host=localhost port=5432 user=your_user dbname=your_db sslmode=disable password=your_password")
	if err != nil {
		return err
	}

	return db.Ping()
}

func getDataHandler(c *gin.Context) {
	var result string

	// –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
	err := db.QueryRow("SELECT 'Hello from database!' as message").Scan(&result)
	if err != nil {
		c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
		return
	}

	c.JSON(http.StatusOK, gin.H{"message": result})
}

func main() {
	// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
	if err := initDB(); err != nil {
		panic("Failed to connect to database: " + err.Error())
	}
	defer db.Close()

	// –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞
	r := gin.Default()

	// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–∞
	r.GET("/data", getDataHandler)

	// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç—É 8080
	r.Run(":8080")
}
```

–ê –≤–æ—Ç —Å –ø–æ–º–æ—â—å—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤. –ú–æ–∂–Ω–æ –º–æ–∫–∞—Ç—å

```go
package main

import (
	"database/sql"
	"net/http"

	"github.com/gin-gonic/gin"
	_ "github.com/lib/pq" // PostgreSQL driver
)

// DatabaseInterface –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
type DatabaseInterface interface {
	GetMessage() (string, error)
}

// DatabaseService —Ä–µ–∞–ª–∏–∑—É–µ—Ç DatabaseInterface
type DatabaseService struct {
	db *sql.DB
}

// –§–∞–±—Ä–∏–∫–∞
func NewDatabaseService(db *sql.DB) *DatabaseService {
	return &DatabaseService{db: db}
}

func (ds *DatabaseService) GetMessage() (string, error) {
	var result string
	err := ds.db.QueryRow("SELECT 'Hello from database!' as message").Scan(&result)
	return result, err
}

// Handler —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
type Handler struct {
	dbService DatabaseInterface
}

// –§–∞–±—Ä–∏–∫–∞
func NewHandler(dbService DatabaseInterface) *Handler {
	return &Handler{dbService: dbService}
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ (handler)
func (h *Handler) getDataHandler(c *gin.Context) {
	result, err := h.dbService.GetMessage()
	if err != nil {
		c.JSON(http.StatusInternalServerError, gin.H{"error": err.Error()})
		return
	}

	c.JSON(http.StatusOK, gin.H{"message": result})
}

func initDB() (*sql.DB, error) {
	// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL (–∏–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ —Å–≤–æ—é)
	db, err := sql.Open("postgres", "host=localhost port=5432 user=your_user dbname=your_db sslmode=disable password=your_password")
	if err != nil {
		return nil, err
	}

	if err := db.Ping(); err != nil {
		return nil, err
	}

	return db, nil
}

func main() {
	// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
	db, err := initDB()
	if err != nil {
		panic("Failed to connect to database: " + err.Error())
	}
	defer db.Close()

	// –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
	dbService := NewDatabaseService(db)

	// –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
	handler := NewHandler(dbService)

	// –°–æ–∑–¥–∞–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞
	r := gin.Default()

	// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–∞
	r.GET("/data", handler.getDataHandler)

	// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç—É 8080
	r.Run(":8080")
}

// MockDatabaseService –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
type MockDatabaseService struct {
	message string
	err     error
}

// –§–∞–±—Ä–∏–∫–∞
func NewMockDatabaseService(message string, err error) *MockDatabaseService {
	return &MockDatabaseService{
		message: message,
		err:     err,
	}
}

func (mds *MockDatabaseService) GetMessage() (string, error) {
	return mds.message, mds.err
}

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–∫–∞ –≤ —Ç–µ—Å—Ç–∞—Ö:
/*
func TestGetDataHandler(t *testing.T) {
	// –°–æ–∑–¥–∞–µ–º –º–æ–∫
	mockDB := NewMockDatabaseService("Test message", nil)
	handler := NewHandler(mockDB)

	// –°–æ–∑–¥–∞–µ–º gin –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
	w := httptest.NewRecorder()
	c, _ := gin.CreateTestContext(w)

	// –í—ã–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
	handler.getDataHandler(c)

	// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
	assert.Equal(t, http.StatusOK, w.Code)
	// ... –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
}
*/
```

# Atomic

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–∞–∫–µ—Ç sync/atomic

–û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç¬†**–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å**¬†‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è¬†**—Ü–µ–ª–∏–∫–æ–º**, –±–µ–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –¥—Ä—É–≥–∏–º–∏ –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏.

–≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (–æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ).

```go
import "sync/atomic"

var counter int64

func main() {
	// –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–∏–±–∞–≤–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ
	atomic.AddInt64(&counter, 1) // counter += 1 (–∞—Ç–æ–º–∞—Ä–Ω–æ)

	// –ë–µ–∑–æ–ø–∞—Å–Ω–æ —á–∏—Ç–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
	value := atomic.LoadInt64(&counter)

	// –ë–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
	atomic.StoreInt64(&counter, 10)

	// –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ 10, –ø–æ–º–µ–Ω—è–π –Ω–∞ 20
	ok := atomic.CompareAndSwapInt64(&counter, 10, 20)
	if ok {
    fmt.Println("—É—Å–ø–µ—à–Ω–æ –∑–∞–º–µ–Ω–∏–ª–∏ 10 –Ω–∞ 20")
	}
}
```

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```go
package main

import (
	"fmt"
	"sync"
	"sync/atomic"
)

func main() {
	var counter int64
	var wg sync.WaitGroup

	for i := 0; i < 1000; i++ {
		wg.Add(1)
		go func() {
			defer wg.Done()
			atomic.AddInt64(&counter, 1)
		}()
	}

	wg.Wait()
	fmt.Println("Counter =", counter)
}

```

–ë–µ–∑ atomic —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã–ª –±—ã –º–µ–Ω—å—à–µ 1000, –±—ã–ª–∏ –±—ã –≥–æ–Ω–∫–∏

–° atomic —Ç–æ—á–Ω–æ 1000

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π¬†`sync/atomic`, –µ—Å–ª–∏:

- –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —Å—á–∏—Ç–∞—Ç—å, –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —Ñ–ª–∞–≥ –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å;
- –Ω–µ —Ö–æ—á–µ—Ç—Å—è —Ç—è–Ω—É—Ç—å¬†`sync.Mutex`.

‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π, –µ—Å–ª–∏:

- —É —Ç–µ–±—è —Å–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (—Ç–æ–≥–¥–∞ –ª—É—á—à–µ¬†`sync.Mutex`¬†–∏–ª–∏¬†`sync.RWMutex`);
- –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å¬†**–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ä–∞–∑—É**¬†‚Äî¬†`atomic`¬†–Ω–µ –ø–æ–º–æ–∂–µ—Ç.

# –†–∞–±–æ—Ç–∞ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª—è

```go

go list -m -u all
```

–ü–æ–Ω—è—Ç—å, –∑–∞—á–µ–º –Ω—É–∂–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å

```go
go mod why -m mod
```

```go
go mod why -m example.com/dependency

example.com/dependency is imported by
example.com/yourmodule
```

# Init

Init —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–æ main. –ü—Ä–∏—á—ë–º —Å–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è init —Ñ—É–Ω–∫—Ü–∏–∏ –≤
–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö –ø–∞–∫–µ—Ç–∞—Ö, –ø–æ—Ç–æ–º –≤ –ø–∞–∫–µ—Ç–µ main, –ø–æ—Ç–æ–º —É–∂–µ —Ñ—É–Ω–∫—Ü–∏—è main
